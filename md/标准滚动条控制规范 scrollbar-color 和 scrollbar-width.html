<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"
      name="viewport"
    />
    <title>标准滚动条控制规范 scrollbar-color 和 scrollbar-width</title>
    <link rel="shortcut icon" href="../code.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=fallback"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/prism.css" />
    <link rel="stylesheet" href="../css/edit.css" />
    
  </head>
  
  <body>
    <div class="layout">
      <div class="layout__main">
        <div class="layout__main_left" style="order: 0">
          <div class="layout__main_left-switch"></div>
          <ul>
            <li class=""><a title="哪个 css 格式化工具是你的首选" href="/md/哪个 css 格式化工具是你的首选.html">60 哪个 css 格式化工具是你的首选</a></li><li class=""><a title="CSS 选择器详解 12 个必知用法与最佳实践" href="/md/CSS 选择器详解 12 个必知用法与最佳实践.html">59 CSS 选择器详解 12 个必知用法与最佳实践</a></li><li class=""><a title="动态视口单位之 dvh、svh、lvh" href="/md/动态视口单位之 dvh、svh、lvh.html">58 动态视口单位之 dvh、svh、lvh</a></li><li class=""><a title="不规则造型按钮解决方案" href="/md/不规则造型按钮解决方案.html">57 不规则造型按钮解决方案</a></li><li class=""><a title="不定宽文本溢出跑马灯效果完美解决方案" href="/md/不定宽文本溢出跑马灯效果完美解决方案.html">56 不定宽文本溢出跑马灯效果完美解决方案</a></li><li class=""><a title="巧用 CSS 变量，实现动画函数复用" href="/md/巧用 CSS 变量，实现动画函数复用.html">55 巧用 CSS 变量，实现动画函数复用</a></li><li class=""><a title="角向渐变的妙用" href="/md/角向渐变的妙用.html">54 角向渐变的妙用</a></li><li class=""><a title="有趣的六芒星能力图动画" href="/md/有趣的六芒星能力图动画.html">53 有趣的六芒星能力图动画</a></li><li class=""><a title="有意思的气泡 Loading 效果" href="/md/有意思的气泡 Loading 效果.html">52 有意思的气泡 Loading 效果</a></li><li class=""><a title="CSS 原生支持的三角函数" href="/md/CSS 原生支持的三角函数.html">51 CSS 原生支持的三角函数</a></li><li class=""><a title="有意思的网格下落加载效果" href="/md/有意思的网格下落加载效果.html">50 有意思的网格下落加载效果</a></li><li class=""><a title="有意思的 Emoji 3D 表情切换效果" href="/md/有意思的 Emoji 3D 表情切换效果.html">49 有意思的 Emoji 3D 表情切换效果</a></li><li class=""><a title="神奇的 3D 磨砂玻璃透视效果" href="/md/神奇的 3D 磨砂玻璃透视效果.html">48 神奇的 3D 磨砂玻璃透视效果</a></li><li class=""><a title="抢先体验！超强大的 Anchor Positioning 锚点定位" href="/md/抢先体验！超强大的 Anchor Positioning 锚点定位.html">47 抢先体验！超强大的 Anchor Positioning 锚点定位</a></li><li class=""><a title="CSS 也能实现碰撞检测" href="/md/CSS 也能实现碰撞检测.html">46 CSS 也能实现碰撞检测</a></li><li class=""><a title="现代 CSS 解决方案 - 数学函数 Round" href="/md/现代 CSS 解决方案 - 数学函数 Round.html">45 现代 CSS 解决方案 - 数学函数 Round</a></li><li class=""><a title="现代 CSS 解决方案 - 原生嵌套" href="/md/现代 CSS 解决方案 - 原生嵌套.html">44 现代 CSS 解决方案 - 原生嵌套</a></li><li class=""><a title="神奇的背景，生化危机4日食 Loading 动画还原" href="/md/神奇的背景，生化危机4日食 Loading 动画还原.html">43 神奇的背景，生化危机4日食 Loading 动画还原</a></li><li class=""><a title="当路径动画遇到滚动驱动" href="/md/当路径动画遇到滚动驱动.html">42 当路径动画遇到滚动驱动</a></li><li class=""><a title="CSS 还原拉斯维加斯球数字动画" href="/md/CSS 还原拉斯维加斯球数字动画.html">41 CSS 还原拉斯维加斯球数字动画</a></li><li class=""><a title="单标签下多色块随机文字随机颜色动画" href="/md/单标签下多色块随机文字随机颜色动画.html">40 单标签下多色块随机文字随机颜色动画</a></li><li class=""><a title="CSS 也能实现 if 判断？实现动态高度下的不同样式展现" href="/md/CSS 也能实现 if 判断？实现动态高度下的不同样式展现.html">39 CSS 也能实现 if 判断？实现动态高度下的不同样式展现</a></li><li class=""><a title="Flex 布局下居中溢出滚动截断问题" href="/md/Flex 布局下居中溢出滚动截断问题.html">38 Flex 布局下居中溢出滚动截断问题</a></li><li class=""><a title="带圆角的虚线边框" href="/md/带圆角的虚线边框.html">37 带圆角的虚线边框</a></li><li class=""><a title="现代 CSS 解决方案：文字颜色自动适配背景色" href="/md/现代 CSS 解决方案：文字颜色自动适配背景色.html">36 现代 CSS 解决方案：文字颜色自动适配背景色</a></li><li class=""><a title="神奇的 3D 卡片反光闪烁动效" href="/md/神奇的 3D 卡片反光闪烁动效.html">35 神奇的 3D 卡片反光闪烁动效</a></li><li class=""><a title="现代 CSS 解决方案：accent-color 强调色" href="/md/现代 CSS 解决方案：accent-color 强调色.html">34 现代 CSS 解决方案：accent-color 强调色</a></li><li class=""><a title="巧用 has 和 drop-shadow 实现复杂布局效果" href="/md/巧用 has 和 drop-shadow 实现复杂布局效果.html">33 巧用 has 和 drop-shadow 实现复杂布局效果</a></li><li class=""><a title="巧用 CSS + SVG 实现复杂线条光效动画" href="/md/巧用 CSS + SVG 实现复杂线条光效动画.html">32 巧用 CSS + SVG 实现复杂线条光效动画</a></li><li class=""><a title="极具创意的鼠标交互动画" href="/md/极具创意的鼠标交互动画.html">31 极具创意的鼠标交互动画</a></li><li class="active"><a title="标准滚动条控制规范 scrollbar-color 和 scrollbar-width" href="/md/标准滚动条控制规范 scrollbar-color 和 scrollbar-width.html">30 标准滚动条控制规范 scrollbar-color 和 scrollbar-width</a></li><li class=""><a title="类 ChatGpt 多行文本打字效果" href="/md/类 ChatGpt 多行文本打字效果.html">29 类 ChatGpt 多行文本打字效果</a></li><li class=""><a title="神奇的卡片 Hover 效果与 Blur 的特性探究" href="/md/神奇的卡片 Hover 效果与 Blur 的特性探究.html">28 神奇的卡片 Hover 效果与 Blur 的特性探究</a></li><li class=""><a title="渐变边框文字效果" href="/md/渐变边框文字效果.html">27 渐变边框文字效果</a></li><li class=""><a title="巧妙使用多种方式实现单侧阴影" href="/md/巧妙使用多种方式实现单侧阴影.html">26 巧妙使用多种方式实现单侧阴影</a></li><li class=""><a title="全尺寸的带圆角的渐变边框" href="/md/全尺寸的带圆角的渐变边框.html">25 全尺寸的带圆角的渐变边框</a></li><li class=""><a title="开发中保证你用得到的 css 小技巧" href="/md/开发中保证你用得到的 css 小技巧.html">24 开发中保证你用得到的 css 小技巧</a></li><li class=""><a title="您应该了解的 15 个有用的 CSS 属性" href="/md/您应该了解的 15 个有用的 CSS 属性.html">23 您应该了解的 15 个有用的 CSS 属性</a></li><li class=""><a title="CSS 行元素的截断样式 box-decoration-break 属性" href="/md/CSS 行元素的截断样式 box-decoration-break 属性.html">22 CSS 行元素的截断样式 box-decoration-break 属性</a></li><li class=""><a title="用 SASS 简化媒体查询" href="/md/用 SASS 简化媒体查询.html">21 用 SASS 简化媒体查询</a></li><li class=""><a title="为什么你应该停止使用传统的 margin 和 padding 来设置 CSS 样式" href="/md/为什么你应该停止使用传统的 margin 和 padding 来设置 CSS 样式.html">20 为什么你应该停止使用传统的 margin 和 padding 来设置 CSS 样式</a></li><li class=""><a title="sass 优化响应式布局代码" href="/md/sass 优化响应式布局代码.html">19 sass 优化响应式布局代码</a></li><li class=""><a title="盘点 CSS 文本两端对齐的 N 种方式" href="/md/盘点 CSS 文本两端对齐的 N 种方式.html">18 盘点 CSS 文本两端对齐的 N 种方式</a></li><li class=""><a title="如何修改滚动条的样式" href="/md/如何修改滚动条的样式.html">17 如何修改滚动条的样式</a></li><li class=""><a title="CSS 模拟图片透明的棋盘背景" href="/md/CSS 模拟图片透明的棋盘背景.html">16 CSS 模拟图片透明的棋盘背景</a></li><li class=""><a title="文本描边完美实现" href="/md/文本描边完美实现.html">15 文本描边完美实现</a></li><li class=""><a title="你需要自定义 @property 而不是 CSS 变量的情况" href="/md/你需要自定义 @property 而不是 CSS 变量的情况.html">14 你需要自定义 @property 而不是 CSS 变量的情况</a></li><li class=""><a title="从高度 0 过渡到自动高度" href="/md/从高度 0 过渡到自动高度.html">13 从高度 0 过渡到自动高度</a></li><li class=""><a title="一些 css 语法解释" href="/md/一些 css 语法解释.html">12 一些 css 语法解释</a></li><li class=""><a title="scss 日常用法" href="/md/scss 日常用法.html">11 scss 日常用法</a></li><li class=""><a title="sass 指南" href="/md/sass 指南.html">10 sass 指南</a></li><li class=""><a title="CSS 颜色设置透明度的新姿势" href="/md/CSS 颜色设置透明度的新姿势.html">09 CSS 颜色设置透明度的新姿势</a></li><li class=""><a title="CSS 属性 appearance" href="/md/CSS 属性 appearance.html">08 CSS 属性 appearance</a></li><li class=""><a title="CSS 动画性能优化" href="/md/CSS 动画性能优化.html">07 CSS 动画性能优化</a></li><li class=""><a title="CSS 功能特性" href="/md/CSS 功能特性.html">06 CSS 功能特性</a></li><li class=""><a title="CSS 中的 var() 函数" href="/md/CSS 中的 var() 函数.html">05 CSS 中的 var() 函数</a></li><li class=""><a title="15 个你不知道的 CSS 属性" href="/md/15 个你不知道的 CSS 属性.html">04 15 个你不知道的 CSS 属性</a></li><li class=""><a title="will-change" href="/md/will-change.html">03 will-change</a></li><li class=""><a title="normalize.css 清除元素默认样式" href="/md/normalize.css 清除元素默认样式.html">02 normalize.css 清除元素默认样式</a></li><li class=""><a title="纯 CSS 获取屏幕宽高" href="/md/纯 CSS 获取屏幕宽高.html">01 纯 CSS 获取屏幕宽高</a></li>
          </ul>
        </div>
        <div
          style="order: 1"
          class="layout__main_right md "
        >
          <div class="page-header">
            
            <a href="/md/" class="back-button">Back to MD</a>
            
            <h1>标准滚动条控制规范 scrollbar-color 和 scrollbar-width</h1>
            <p class="time">HaoTian · 2024-12-03 20:41:29</p>
          </div>
          <p>Chrome 在 121 版本开始，原生支持了两个滚动条样式相关的样式 scrollbar-color 和 scrollbar-width。</p>
<p>要知道，在此前，虽然有 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/::-webkit-scrollbar">::-webkit-scrollbar</a> 规范可以控制滚动条，可是，<code>::-webkit-scrollbar</code> 是非标准特性，在 MDN 文档中都明确了不应该在生产环境使用它。</p>
<p>而 <code>scrollbar-color</code> 和 <code>scrollbar-width</code> 是官方标准，在 <a href="https://drafts.csswg.org/css-scrollbars/#scrollbar-width">CSS Scrollbars Styling Module Level 1</a> 规范中被提出。</p>
<p>本文，我们就将一起学习看看这两个属性的使用。</p>
<h2>scrollbar-color 设置滚动条颜色</h2>
<p>顾名思义，scrollbar-color 就是用于设置滚动条颜色的。</p>
<p>不过有意思的是，一个完整的滚动条，其实是有多个小组件组成的，所以能设置的颜色其实也有很多。</p>
<p>以非标准规范 <code>::-webkit-scrollbar</code> 为例，它将滚动条拆分成了这么多个部分：</p>
<img src="../imgs/111/16.png" />

<p>当然，新规范没有这么复杂，我们简化上述的图，可以得到这么一张图：</p>
<img src="../imgs/111/17.png" />

<p>而 <code>scrollbar-color</code> 能够设置的，正是上图中的 track 和 thumb 的颜色：</p>
<ul>
<li>轨道（track）是指滚动条，其一般是固定的而不管滚动位置的背景。</li>
<li>滑块（thumb）是指滚动条通常漂浮在轨道的顶部上的移动部分。</li>
</ul>
<p>简单举个例子:</p>
<pre><code class="language-html">&lt;div class=&quot;scroll-box&quot;&gt;
  &lt;p&gt;
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Reiciendis quaerat
    ipsam fugit fugiat cupiditate asperiores neque libero natus atque, suscipit
    error esse inventore numquam molestiae quas laborum eius debitis cum? Lorem
    ipsum dolor sit amet consectetur adipisicing elit. Reiciendis quaerat ipsam
    fugit fugiat cupiditate asperiores neque libero natus atque, suscipit error
    esse inventore numquam molestiae quas laborum eius debitis cum? ...
  &lt;/p&gt;
&lt;/div&gt;
</code></pre>
<pre><code class="language-css">.scroll-box {
  border: 1px solid #666;
  overflow: scroll;
}
</code></pre>
<p>正常而言，当 <code>&lt;p&gt;</code> 标签内的内容足够多，溢出到开始滚动，则滚动条样式为：</p>
<img src="../imgs/111/18.png" />

<p>此时，我们可以通过 <code>scrollbar-color</code> 设置滚动条的轨道颜色和滑块颜色：</p>
<pre><code class="language-css">.scroll-box {
  border: 1px solid #666;
  overflow: scroll;
  scrollbar-color: #fff #000;
  // OR
  scrollbar-color: #000 #fff;
}
</code></pre>
<p>则，样式表现如下：</p>
<img src="../imgs/111/19.png" />

<p>看图就非常好理解了，简单而言 <code>scrollbar-color: #000 #fff</code>，需要设置两个颜色，将第一种颜色应用于滚动条滑块，第二种颜色应用于滚动条轨道。</p>
<p>当然，上图是在 Windows 操作系统下的样式表现，我再补充一张在 macOS/iOS 操作系统下的样式表现效果：</p>
<img src="../imgs/111/20.png" />

<p>由于 macOS/iOS 操作系统默认情况下，即便容器内是可滚动的，也不会显示滚动条，上述效果都是在 Hover 状态或者滚动状态下的效果。</p>
<p>并且，<strong>值得注意的是，大家可以发现，macOS/iOS 操作系统下滚动条轨道是透明的，无法被设置颜色，只能设置滚动条滑块的颜色</strong>。</p>
<p>完整的 DEMO，你可以戳这里：<a href="https://codepen.io/Chokcoco/pen/GRLQzYB?editors=1100">CodePen Demo -- Scrollbar-color Demo</a></p>
<p>当然，值得注意的是。很多人看中文版的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/scrollbar-color">MDN 文档（2024-04-06）</a>，会看到除了直接设置两个颜色值，以及上面的 <code>auto</code> 关键字，规范还提供了 <code>light</code> 和 <code>dark</code> 关键字：</p>
<pre><code class="language-css"> {
  /* Keyword values */
  scrollbar-color: auto;
  scrollbar-color: dark;
  scrollbar-color: light;
}
</code></pre>
<p>在我实测过后，发现实际没有任何浏览器（用户代理）目前支持 <code>light</code> 和 <code>dark</code> 关键字。</p>
<p>中文文档存在一定的滞后性，还是推荐大家直接看英文文档：</p>
<img src="../imgs/111/21.png" />

<h2>crollbar-width 设置滚动条粗细</h2>
<p>了解完 <code>scrollbar-color</code> 后，我们再来看看 <code>scrollbar-width</code>。这个从名字也很好理解，设置滚动条的宽度。</p>
<p>那是否和我们想象的一样，可以任意设置滚动条的宽度，甚至乎，可以定制化的设置滑块和轨道的宽度？</p>
<p>遗憾的是，在 <a href="https://drafts.csswg.org/css-scrollbars/#scrollbar-width">CSS Scrollbars Styling Module Level 1</a> 一期滚动条规范中，这个属性的功能被设置的非常弱。</p>
<p>不要说分别设置滑块和轨道的宽度，<code>scrollbar-width</code> 目前甚至不支持接受一个宽度数值。</p>
<p>什么意思呢？也就是，当前 <code>scrollbar-width</code> 只接收 3 个关键字：</p>
<ul>
<li><code>scrollbar-width: auto</code>：系统默认的滚动条宽度。</li>
<li><code>scrollbar-width: thin</code>：系统提供的瘦滚动条宽度，或者比默认滚动条宽度更窄的宽度</li>
<li><code>scrollbar-width: none</code>：不显示滚动条，但是该元素依然可以滚动</li>
</ul>
<p>简单示意图如下：</p>
<img src="../imgs/111/22.png" />

<p>完整的 DEMO，你可以戳这里：<a href="https://codepen.io/Chokcoco/pen/eYoVxqd?editors=1100">CodePen Demo -- Scrollbar-width Demo</a></p>
<h2>总结一下</h2>
<p>可以看到，其实就目前 <code>scrollbar-width</code> 而言，其能力还是属于比较鸡肋的。相对正常的样式，仅仅多了一种瘦版样式选择以及提供了无滚动条模式。</p>
<p>当然，整个 <code>scrollbar-color</code> 和 <code>scrollbar-width</code> 相较于非标准的 <code>::-webkit-scrollbar</code> 规范已经是非常大的一步跨越。只是其功能的丰富性和全面性还需要等待。</p>

        </div>
      </div>
    </div>
    <div class="body_bg"></div>
    <div class="zoom-overlay"></div>
    <style>
      .zoom-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        z-index: 1000;
        cursor: zoom-out;
      }
      .zoomed-image {
        position: fixed;
        z-index: 1001;
        will-change: transform;
        cursor: zoom-out;
        max-width: 90vw;
        max-height: 90vh;
        object-fit: contain;
      }
      .back-button {
        display: inline-flex;
        align-items: center;
        padding: 8px 16px;
        background: #f0f0f0;
        border: none;
        border-radius: 4px;
        color: #333;
        text-decoration: none;
        font-size: 14px;
        margin-bottom: 16px;
        cursor: pointer;
        transition: background-color 0.2s;
      }
      .back-button:hover {
        background: #e0e0e0;
      }
      .back-button::before {
        content: "←";
        margin-right: 8px;
      }
    </style>
    <script defer src="../js/prism.min.js"></script>
    <script>
      const switchBtn = document.querySelector(".layout__main_left-switch");
      const left = document.querySelector(".layout__main_left");
      switchBtn.addEventListener("click", () => {
        left.classList.toggle("show");
      });

      // Image zoom with FLIP animation
      const overlay = document.querySelector('.zoom-overlay');
      let activeImage = null;

      document.querySelectorAll('img').forEach(img => {
        if (img.closest('a')) return; // Skip images that are inside links
        img.style.cursor = 'zoom-in';
        img.addEventListener('click', handleImageClick);
      });

      function handleImageClick(event) {
        const img = event.target;
        
        if (activeImage) {
          // If an image is already zoomed, unzoom it
          unzoomImage();
          return;
        }

        // Get the initial position and size
        const rect = img.getBoundingClientRect();
        const first = {
          x: rect.left,
          y: rect.top,
          width: rect.width,
          height: rect.height
        };

        // Create a clone of the image
        const clone = img.cloneNode();
        clone.classList.add('zoomed-image');
        document.body.appendChild(clone);

        // Position the clone exactly over the original
        clone.style.position = 'fixed';
        clone.style.left = `${first.x}px`;
        clone.style.top = `${first.y}px`;
        clone.style.width = `${first.width}px`;
        clone.style.height = `${first.height}px`;
        clone.style.margin = '0';
        clone.style.transformOrigin = 'top left';

        // Show the overlay
        overlay.style.display = 'block';

        // Calculate the final position and scale
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const targetWidth = Math.min(img.naturalWidth, viewportWidth * 0.9);
        const targetHeight = Math.min(img.naturalHeight, viewportHeight * 0.9);
        const scaleX = targetWidth / first.width;
        const scaleY = targetHeight / first.height;
        const scale = Math.min(scaleX, scaleY);

        const last = {
          width: first.width * scale,
          height: first.height * scale
        };
        last.x = (viewportWidth - last.width) / 2;
        last.y = (viewportHeight - last.height) / 2;

        // Calculate and apply the transform
        const dx = last.x - first.x;
        const dy = last.y - first.y;
        
        requestAnimationFrame(() => {
          clone.style.transform = `translate(${dx}px, ${dy}px) scale(${scale})`;
          clone.style.transition = 'transform 0.3s ease-out';
        });

        activeImage = { original: img, clone: clone };

        // Add click handlers for closing
        clone.addEventListener('click', unzoomImage);
        overlay.addEventListener('click', unzoomImage);
      }

      function unzoomImage() {
        if (!activeImage) return;

        const { original, clone } = activeImage;
        const rect = original.getBoundingClientRect();

        // Animate back to the original position
        clone.style.transform = `translate(0, 0) scale(1)`;
        
        // Clean up after the animation
        clone.addEventListener('transitionend', () => {
          clone.remove();
          overlay.style.display = 'none';
        }, { once: true });

        activeImage = null;
      }
    </script>
  </body>
</html>
