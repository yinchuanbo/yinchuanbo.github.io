<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eslint 和 Prettier 的配置与冲突处理</title>
    <link rel="shortcut icon" href="../code.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/prism.css" />
    <link rel="stylesheet" href="../css/edit.css" />
    
  </head>
  <body class="line-numbers">
    <div class="layout">
      <div class="layout__main">
        <div class="layout__main_left" style="order: 1;">
          <ul>
            <li class=""><a title="详解 Monorepo 进化、优劣与使用场景" href="/md/详解 Monorepo 进化、优劣与使用场景.html">17 详解 Monorepo 进化、优劣与使用场景</a></li><li class=""><a title="检查前端项目和 node 项目中未被使用的依赖包" href="/md/检查前端项目和 node 项目中未被使用的依赖包.html">16 检查前端项目和 node 项目中未被使用的依赖包</a></li><li class=""><a title="最新 ESLint 9.0 + vue3.0 + TS 配置" href="/md/最新 ESLint 9.0 + vue3.0 + TS 配置.html">15 最新 ESLint 9.0 + vue3.0 + TS 配置</a></li><li class=""><a title="如何使用 Vike 和 Vite 构建可扩展的微前端" href="/md/如何使用 Vike 和 Vite 构建可扩展的微前端.html">14 如何使用 Vike 和 Vite 构建可扩展的微前端</a></li><li class=""><a title="前端项目中的 node_modules 无用依赖检测工具" href="/md/前端项目中的 node_modules 无用依赖检测工具.html">13 前端项目中的 node_modules 无用依赖检测工具</a></li><li class=""><a title="前端版本管理工具 - volta" href="/md/前端版本管理工具 - volta.html">12 前端版本管理工具 - volta</a></li><li class=""><a title="前端构建系统浅析" href="/md/前端构建系统浅析.html">11 前端构建系统浅析</a></li><li class=""><a title="使用 eslint-plugin-depend 移除无用的 NPM 包" href="/md/使用 eslint-plugin-depend 移除无用的 NPM 包.html">10 使用 eslint-plugin-depend 移除无用的 NPM 包</a></li><li class=""><a title="使用 Axios 配置动态域名的基础 URL 和项目打包" href="/md/使用 Axios 配置动态域名的基础 URL 和项目打包.html">09 使用 Axios 配置动态域名的基础 URL 和项目打包</a></li><li class=""><a title="webpack 打包体积优化" href="/md/webpack 打包体积优化.html">08 webpack 打包体积优化</a></li><li class=""><a title="vite插件开发,项目版本号自增,自动压缩构建产物上传oss" href="/md/vite插件开发,项目版本号自增,自动压缩构建产物上传oss.html">07 vite插件开发,项目版本号自增,自动压缩构建产物上传oss</a></li><li class=""><a title="vite 配置" href="/md/vite 配置.html">06 vite 配置</a></li><li class=""><a title="vite 创建 vue3 项目" href="/md/vite 创建 vue3 项目.html">05 vite 创建 vue3 项目</a></li><li class=""><a title="Eslint 配置指南" href="/md/Eslint 配置指南.html">04 Eslint 配置指南</a></li><li class=""><a title="ESLint 现已支持检查 JSON 和 Markdown" href="/md/ESLint 现已支持检查 JSON 和 Markdown.html">03 ESLint 现已支持检查 JSON 和 Markdown</a></li><li class=""><a title="ESLint 忽略检查行和文件总结" href="/md/ESLint 忽略检查行和文件总结.html">02 ESLint 忽略检查行和文件总结</a></li><li class="active"><a title="Eslint 和 Prettier 的配置与冲突处理" href="/md/Eslint 和 Prettier 的配置与冲突处理.html">01 Eslint 和 Prettier 的配置与冲突处理</a></li>
          </ul>
        </div>
        <div
          class="layout__main_right md "
          style="order: 0;"
        >
          <h1>Eslint 和 Prettier 的配置与冲突处理</h1>
          <h3>前言</h3>
<p>统一的前端开发规范，可有助于代码质量提升与团队协作效率提高。通常做法是 eslint 与 prettier 的配合进行实现。</p>
<ul>
<li>eslint 中包含三类规则：代码质量检查、代码错误检查、代码风格检查</li>
<li>prettier 包含：代码风格检查</li>
</ul>
<p>代码风格部分会冲突，我们会对冲突部分进行处理</p>
<p><img src="../imgs/29/01.awebp" alt=""></p>
<h3>Eslint</h3>
<ol>
<li>安装</li>
</ol>
<pre><code class="language-bash">npm i eslint -D
npm init @eslint/config
</code></pre>
<p><img src="../imgs/29/02.awebp" alt=""></p>
<p>按照提示完成初始配置，生成<code>.eslintrc.json</code>配置文件</p>
<p><img src="../imgs/29/03.awebp" alt=""></p>
<ol start="2">
<li>使用</li>
</ol>
<ul>
<li>通过命令的形式修复代码</li>
</ul>
<pre><code class="language-bash">npx eslint . --fix
</code></pre>
<ul>
<li>vscode 插件，使得 vscode 调用 eslint 能力，实现实时问题提示，以及保存触发修复</li>
</ul>
<p>插件安装后，修改 vscode 配置文件 setting.json</p>
<pre><code class="language-json">{
  //...
  &quot;editor.formatOnSave&quot;: true,
  &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;
}
</code></pre>
<h3>Prettier</h3>
<p>eslint 的代码格式做的不够彻底，需要 prettier 进行增强。并且 prettier 支持更多的文件格式的格式化。</p>
<ol>
<li>安装</li>
</ol>
<pre><code class="language-bash">npm i prettier -D
</code></pre>
<p>配置<code>.prettierrc.json</code></p>
<p><img src="../imgs/29/04.awebp" alt=""></p>
<ul>
<li>通过命令的形式修复代码</li>
</ul>
<pre><code class="language-bash">npx prettier --write.
</code></pre>
<ul>
<li>vscode 插件，使得 vscode 调用 prettier 能力，实现保存触发修复</li>
</ul>
<p>插件安装后，修改 vscode 配置文件 setting.json</p>
<pre><code class="language-json">{
  //...
  &quot;editor.formatOnSave&quot;: true,
  &quot;editor.defaultFormatter&quot;: &quot;esbenp.prettier-vscode&quot;
}
</code></pre>
<h3>冲突处理</h3>
<p>在进行上述配置后，vscode 中保存后，出现风格规则不一致，eslint 报错问题，现在来解决冲突</p>
<ol>
<li>关掉与 Prettier 产生冲突的 ESlint 格式相关配置</li>
</ol>
<p>使用<code>eslint-config-prettier</code>这个规则集，关闭 eslint 和 prettier 冲突的规则设置</p>
<pre><code class="language-bash">npm i eslint-config-prettier -D
</code></pre>
<p>在<code>.eslintrc.json</code>加入<code>perttier</code>规则集</p>
<pre><code class="language-json">{
  &quot;extends&quot;: [
    &quot;eslint:recommended&quot;,
    &quot;plugin:@typescript-eslint/recommended&quot;,
    &quot;prettier&quot; // 覆盖eslint格式配置,写在最后
  ]
}
</code></pre>
<ol start="2">
<li>不再单独运行 prettier，将 prettier 集成到 eslint 中，作为一项 rule 进行提示与修复</li>
</ol>
<p>使用<code>eslint-plugin-prettier</code>这个插件</p>
<pre><code class="language-bash">npm i eslint-plugin-prettier -D
</code></pre>
<p>在<code>.eslintrc.json</code>加入<code>perttier</code>插件</p>
<pre><code class="language-json">{
  &quot;plugins&quot;: [&quot;@typescript-eslint&quot;, &quot;prettier&quot;], // 注册插件
  &quot;rules&quot;: {
    &quot;prettier/perttier&quot;: &quot;error&quot; // 加入prettier规则
  }
}
</code></pre>
<ol start="3">
<li>将上面两个步骤合在一起就是下面的配置，也是官方的推荐配置</li>
</ol>
<pre><code class="language-json">{
  &quot;extends&quot;: [&quot;plugin:prettier/recommended&quot;]
}
</code></pre>
<p>而<code>plugin:prettier/recommended</code>帮我们做了如下事情：</p>
<pre><code class="language-json">{
  &quot;extends&quot;: [&quot;prettier&quot;], // 使用eslinst-config-prettier中的配置项
  &quot;plugins&quot;: [&quot;prettier&quot;], // 注册该prettier插件
  &quot;rules&quot;: {
    &quot;prettier/prettier&quot;: &quot;error&quot;, // 在eslint中运行prettier，并启用该插件提供的规则
    &quot;arrow-body-style&quot;: &quot;off&quot;, // 关闭规则
    &quot;prefer-arrow-callback&quot;: &quot;off&quot; // 关闭规则
  }
}
</code></pre>
<h3>总结</h3>
<p>eslint 和 prettier 配置使用需要进行如下操作：</p>
<ol>
<li>首先下载 eslint, prettier, eslint-config-prettier, eslint-plugin-prettier</li>
</ol>
<pre><code class="language-bash">npm install --save-dev eslint prettier eslint-config-prettier eslint-plugin-prettier
</code></pre>
<ol start="2">
<li>项目根目录添加 .eslintrc.js 和 .prettierrc</li>
</ol>
<pre><code class="language-json">// .eslintrc.json
{
  &quot;extends&quot;: [&quot;plugin:prettier/recommended&quot;]
}
</code></pre>
<pre><code class="language-json">// .prettierrc.json
{
  &quot;singleQuote&quot;: true // 根据需要配置
}
</code></pre>
<ol start="3">
<li>补充 ESLint 从 v8.53.0 起，将弃用代码风格相关规则</li>
</ol>

        </div>
      </div>
    </div>
    <div class="body_bg"></div>
    <script defer src="../js/prism.min.js"></script>
    <script>
      // const leftBorder = document.querySelector(".left__border");
      // const resizer = document.querySelector(".layout__main_left");
      // const resizable = document.querySelector(".layout__main_right");
      // leftBorder.addEventListener("mousedown", initResize);
      // function initResize(e) {
      //   e.preventDefault();
      //   document.addEventListener("mousemove", startResizing);
      //   document.addEventListener("mouseup", stopResizing);
      // }
      // function startResizing(e) {
      //   const resizerRect = resizer.getBoundingClientRect();
      //   const resizableRect = resizable.getBoundingClientRect();
      //   let newWidth = e.clientX - resizerRect.left;
      //   if (newWidth < 300) {
      //     newWidth = 300;
      //   } else if (newWidth > 850) {
      //     newWidth = 850;
      //   }
      //   resizer.style.width = `${newWidth}px`;
      // }
      // function stopResizing() {
      //   document.removeEventListener("mousemove", startResizing);
      //   document.removeEventListener("mouseup", stopResizing);
      // }
      // const liActive = document.querySelector(".layout__main_left li.active");
      // liActive.scrollIntoView({
      //   behavior: "smooth",
      //   block: "center",
      //   inline: "nearest",
      // });
    </script>
  </body>
</html>
