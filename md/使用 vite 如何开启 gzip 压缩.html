<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>使用 vite 如何开启 gzip 压缩</title>
    <link rel="shortcut icon" href="../code.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/prism.css" />
    <link rel="stylesheet" href="../css/edit.css" />
    
  </head>
  <body class="line-numbers">
    <div class="layout">
      <div class="layout__main">
        <div class="layout__main_left" style="order: 1">
          <ul>
            <li class=""><a title="详解 Monorepo 进化、优劣与使用场景" href="/md/详解 Monorepo 进化、优劣与使用场景.html">详解 Monorepo 进化、优劣与使用场景</a></li><li class=""><a title="检查前端项目和 node 项目中未被使用的依赖包" href="/md/检查前端项目和 node 项目中未被使用的依赖包.html">检查前端项目和 node 项目中未被使用的依赖包</a></li><li class=""><a title="最新 ESLint 9.0 + vue3.0 + TS 配置" href="/md/最新 ESLint 9.0 + vue3.0 + TS 配置.html">最新 ESLint 9.0 + vue3.0 + TS 配置</a></li><li class=""><a title="如何使用 Vike 和 Vite 构建可扩展的微前端" href="/md/如何使用 Vike 和 Vite 构建可扩展的微前端.html">如何使用 Vike 和 Vite 构建可扩展的微前端</a></li><li class=""><a title="前端项目中的 node_modules 无用依赖检测工具" href="/md/前端项目中的 node_modules 无用依赖检测工具.html">前端项目中的 node_modules 无用依赖检测工具</a></li><li class=""><a title="前端版本管理工具 - volta" href="/md/前端版本管理工具 - volta.html">前端版本管理工具 - volta</a></li><li class=""><a title="前端构建系统浅析" href="/md/前端构建系统浅析.html">前端构建系统浅析</a></li><li class="active"><a title="使用 vite 如何开启 gzip 压缩" href="/md/使用 vite 如何开启 gzip 压缩.html">使用 vite 如何开启 gzip 压缩</a></li><li class=""><a title="使用 eslint-plugin-depend 移除无用的 NPM 包" href="/md/使用 eslint-plugin-depend 移除无用的 NPM 包.html">使用 eslint-plugin-depend 移除无用的 NPM 包</a></li><li class=""><a title="使用 Axios 配置动态域名的基础 URL 和项目打包" href="/md/使用 Axios 配置动态域名的基础 URL 和项目打包.html">使用 Axios 配置动态域名的基础 URL 和项目打包</a></li><li class=""><a title="webpack 打包体积优化" href="/md/webpack 打包体积优化.html">webpack 打包体积优化</a></li><li class=""><a title="vite插件开发,项目版本号自增,自动压缩构建产物上传oss" href="/md/vite插件开发,项目版本号自增,自动压缩构建产物上传oss.html">vite插件开发,项目版本号自增,自动压缩构建产物上传oss</a></li><li class=""><a title="vite 配置" href="/md/vite 配置.html">vite 配置</a></li><li class=""><a title="vite 创建 vue3 项目" href="/md/vite 创建 vue3 项目.html">vite 创建 vue3 项目</a></li><li class=""><a title="Eslint 配置指南" href="/md/Eslint 配置指南.html">Eslint 配置指南</a></li><li class=""><a title="ESLint 现已支持检查 JSON 和 Markdown" href="/md/ESLint 现已支持检查 JSON 和 Markdown.html">ESLint 现已支持检查 JSON 和 Markdown</a></li><li class=""><a title="ESLint 忽略检查行和文件总结" href="/md/ESLint 忽略检查行和文件总结.html">ESLint 忽略检查行和文件总结</a></li><li class=""><a title="Eslint 和 Prettier 的配置与冲突处理" href="/md/Eslint 和 Prettier 的配置与冲突处理.html">Eslint 和 Prettier 的配置与冲突处理</a></li>
          </ul>
        </div>
        <div
          class="layout__main_right md "
          style="order: 0"
        >
          <h1>使用 vite 如何开启 gzip 压缩</h1>
          <h2>使用 vite 如何开启 gzip 压缩</h2>
<p>在 Vite 中启用 GZIP 压缩并不是默认功能，但你可以通过使用插件来实现这一目标。</p>
<p>下面是一个使用 <code>vite-plugin-compression</code> 插件的例子，这个插件允许你在 Vite 项目中启用 GZIP 压缩。</p>
<p>首先，你需要安装 <code>vite-plugin-compression</code> 插件。打开你的终端并运行以下命令：</p>
<pre><code class="language-sh">npm install --save-dev vite-plugin-compression
</code></pre>
<p>接着，你可以在 <code>vite.config.js</code> 文件中配置插件。如果你还没有这个文件，你需要创建一个。以下是配置示例：</p>
<pre><code class="language-js">// vite.config.js
import { defineConfig } from &quot;vite&quot;;
import compression from &quot;vite-plugin-compression&quot;;

export default defineConfig({
  plugins: [
    compression({
      verbose: true, // 输出压缩日志
      disable: false, // 是否禁用压缩
      threshold: 10240, // 对超过10KB的文件进行压缩
      algorithm: &quot;gzip&quot;, // 使用gzip压缩
      ext: &quot;.gz&quot;, // 压缩后文件的扩展名
    }),
  ],
});
</code></pre>
<p>在这个例子中，我们启用了 GZIP 压缩，并设置了几个选项：</p>
<ul>
<li><p><code>verbose: true</code> 表示会在控制台输出压缩信息。</p>
</li>
<li><p><code>disable: false</code> 确保插件不会被禁用。</p>
</li>
<li><p><code>threshold: 10240</code> 指定只有大于 10KB 的文件才会被压缩。</p>
</li>
<li><p><code>algorithm: &#39;gzip&#39;</code> 指定使用 GZIP 压缩算法。</p>
</li>
<li><p><code>ext: &#39;.gz&#39;</code> 设置压缩后的文件扩展名为 <code>.gz</code>。</p>
</li>
</ul>
<p>现在当你运行 <code>vite build</code> 命令时，Vite 将会压缩符合条件的文件，并在构建输出目录中生成 <code>.gz</code> 文件。</p>
<p>请注意，上述配置仅适用于生产环境的构建。在开发环境下，Vite 并不会自动发送 GZIP 压缩的文件，因为开发服务器通常不支持这样的功能。为了在开发环境中支持 GZIP 压缩，你可能需要使用支持 GZIP 的开发服务器，或者配置代理到支持 GZIP 的服务器。</p>
<p>如果你希望在开发环境中也启用 GZIP 压缩，可以考虑使用其他插件，例如 <code>vite-plugin-gzip-dev</code> 或者手动设置服务器中间件来处理 GZIP 请求。不过，通常来说在开发环境中使用 GZIP 压缩并不常见，因为它可能会增加开发服务器的复杂性，并且对于开发过程来说没有必要。</p>

        </div>
      </div>
    </div>
    <div class="body_bg"></div>
    <script defer src="../js/prism.min.js"></script>
    <script>
      // const leftBorder = document.querySelector(".left__border");
      // const resizer = document.querySelector(".layout__main_left");
      // const resizable = document.querySelector(".layout__main_right");
      // leftBorder.addEventListener("mousedown", initResize);
      // function initResize(e) {
      //   e.preventDefault();
      //   document.addEventListener("mousemove", startResizing);
      //   document.addEventListener("mouseup", stopResizing);
      // }
      // function startResizing(e) {
      //   const resizerRect = resizer.getBoundingClientRect();
      //   const resizableRect = resizable.getBoundingClientRect();
      //   let newWidth = e.clientX - resizerRect.left;
      //   if (newWidth < 300) {
      //     newWidth = 300;
      //   } else if (newWidth > 850) {
      //     newWidth = 850;
      //   }
      //   resizer.style.width = `${newWidth}px`;
      // }
      // function stopResizing() {
      //   document.removeEventListener("mousemove", startResizing);
      //   document.removeEventListener("mouseup", stopResizing);
      // }
      const liActive = document.querySelector(".layout__main_left li.active");
      liActive.scrollIntoView({
        behavior: "smooth",
        block: "center",
        inline: "nearest",
      });
      const imgs = document.querySelectorAll("img");
      imgs.forEach((img) => {
        img.onclick = () => {
          let imgHove = document.querySelector(".img-hover");
          if (imgHove) imgHove.remove();
          const src = img.src;
          const html = `
            <div class="img-hover">
              <img src="${src}" />
            </div>
          `;
          document.body.insertAdjacentHTML("beforeend", html);
          document.body.style.overflow = "hidden"
          imgHove = document.querySelector(".img-hover");
          imgHove.onclick = () => {
            imgHove.remove();
            document.body.style.overflow = "initial"
          };
        };
      });
    </script>
  </body>
</html>
