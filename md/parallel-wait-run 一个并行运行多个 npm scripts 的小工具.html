<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"
      name="viewport"
    />
    <title>parallel-wait-run 一个并行运行多个 npm scripts 的小工具</title>
    <link rel="shortcut icon" href="../code.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=fallback"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/prism.css" />
    <link rel="stylesheet" href="../css/edit.css" />
    
  </head>
  
  <body>
    <div class="layout">
      <div class="layout__main">
        <div class="layout__main_left" style="order: 2">
          <div class="layout__main_left-switch"></div>
          <ul>
            <li class=""><a title="为什么 Bun 可能对 Node 降维打击" href="/md/为什么 Bun 可能对 Node 降维打击.html">10 为什么 Bun 可能对 Node 降维打击</a></li><li class=""><a title="Node 获取整站所有 scss 文件并输出内容" href="/md/Node 获取整站所有 scss 文件并输出内容.html">09 Node 获取整站所有 scss 文件并输出内容</a></li><li class="active"><a title="parallel-wait-run 一个并行运行多个 npm scripts 的小工具" href="/md/parallel-wait-run 一个并行运行多个 npm scripts 的小工具.html">08 parallel-wait-run 一个并行运行多个 npm scripts 的小工具</a></li><li class=""><a title="Deno 2.0 正式发布" href="/md/Deno 2.0 正式发布.html">07 Deno 2.0 正式发布</a></li><li class=""><a title="如果你使用的第三方库有 bug，你会怎么办" href="/md/如果你使用的第三方库有 bug，你会怎么办.html">06 如果你使用的第三方库有 bug，你会怎么办</a></li><li class=""><a title="宝塔部署 NodeJS 项目" href="/md/宝塔部署 NodeJS 项目.html">05 宝塔部署 NodeJS 项目</a></li><li class=""><a title="性能提升 5-10 倍的加强版 Express" href="/md/性能提升 5-10 倍的加强版 Express.html">04 性能提升 5-10 倍的加强版 Express</a></li><li class=""><a title="node环境变量及在项目中的使用" href="/md/node环境变量及在项目中的使用.html">03 node环境变量及在项目中的使用</a></li><li class=""><a title="统一 Node 版本" href="/md/统一 Node 版本.html">02 统一 Node 版本</a></li><li class=""><a title="NodeJS 全栈之视频通话" href="/md/NodeJS 全栈之视频通话.html">01 NodeJS 全栈之视频通话</a></li>
          </ul>
        </div>
        <div
          style="order: 1"
          class="layout__main_right md "
        >
          <div class="page-header">
            <h1>parallel-wait-run 一个并行运行多个 npm scripts 的小工具</h1>
            <p class="time">HaoTian · 2024-11-13 21:51:36</p>
          </div>
          <h2>它是什么</h2>
<p><code>parallel-wait-run</code>支持同时运行多个<code>npm scripts</code>，并且可以通过自定义的异步函数控制每一个<code>npm scripts</code>的启动时机。</p>
<img src="../imgs/102/02.webp" />

<p>上述终端运行截图的<a href="https://github.com/LiuWenXing1996/parallel-example">仓库地址</a></p>
<h2>安装</h2>
<pre><code class="language-sh"># npm
npm install -D parallel-wait-run

# pnpm
pnpm add -D parallel-wait-run

# yarn
yarn add -D parallel-wait-run
</code></pre>
<h2>配置</h2>
<p>在项目根目录添加配置文件 <code>parallel.config.ts</code>（也支持其他<code>JS</code>和<code>TS</code>扩展名）</p>
<pre><code class="language-ts">import { defineConfig } from &quot;parallel-wait-run&quot;;

export default defineConfig({
  scripts: [
    {
      name: &quot;dev&quot;,
      command: `dev command`,
      wait: async () =&gt; {
        sleep(1000);
        return true;
      },
    },
    {
      name: `unit-test`,
      command: `unit-test command`,
      wait: async () =&gt; {
        sleep(2000);
        return true;
      },
    },
  ],
});
</code></pre>
<p>也支持使用函数生成配置</p>
<pre><code class="language-ts">import { defineConfig } from &quot;parallel-wait-run&quot;;

export default defineConfig(({ mode, root }) =&gt; {
  return {
    scripts: [
      {
        name: &quot;dev&quot;,
        command: `pnpm  dev`,
      },
      {
        name: `unit-test`,
        command: `pnpm test-watch`,
      },
    ],
  };
});
</code></pre>
<p>异步函数也是支持的</p>
<pre><code class="language-ts">import { defineConfig } from &quot;parallel-wait-run&quot;;

export default defineConfig(async ({ mode, root }) =&gt; {
  return {
    scripts: [
      {
        name: &quot;dev&quot;,
        command: `pnpm  dev`,
      },
      {
        name: `unit-test`,
        command: `pnpm test-watch`,
      },
    ],
  };
});
</code></pre>
<h2>运行</h2>
<pre><code class="language-sh"># npm
npm run parallel

# pnpm
pnpm parallel

# yarn
yarn parallel
</code></pre>
<p>更多配置内容，请参考<a href="https://www.npmjs.com/package/parallel-wait-run">文档</a></p>

        </div>
      </div>
    </div>
    <div class="body_bg"></div>
    <script defer src="../js/prism.min.js"></script>
    <script>
      const switchBtn = document.querySelector(".layout__main_left-switch");
      const left = document.querySelector(".layout__main_left");
      switchBtn.addEventListener("click", () => {
        left.classList.toggle("show");
      });
    </script>
  </body>
</html>
