<!DOCTYPE html>
<html lang="en" class="">
  <head>
    <meta charset="UTF-8" />
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"
      name="viewport"
    />
    <title>ä¸ºä½•è¯´ AbortController æ˜¯å‰ç«¯ä¸€æŠŠåˆ©å‰‘</title>
    <link rel="shortcut icon" href="../code.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=fallback"
      rel="stylesheet"
    />
    <link id="prismTheme" rel="stylesheet" href="../css/prism.css" />
    <link rel="stylesheet" href="../css/edit.css" />
    
    <style>
      /* Animation Styles */
      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .slide-in {
        animation: slideIn 0.5s ease;
      }

      @keyframes slideIn {
        from {
          transform: translateY(-20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .button {
        transition: background-color 0.3s, transform 0.3s;
      }

      .button:hover {
        background-color: #3700b3;
        transform: scale(1.05);
      }

      /* Tooltip Styles */
      .tooltip {
        position: relative;
        display: inline-block;
      }

      .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        background-color: black;
        color: #fff;
        text-align: center;
        border-radius: 5px;
        padding: 5px 0;
        position: absolute;
        z-index: 1;
        bottom: 125%;
        left: 50%;
        margin-left: -60px;
        opacity: 0;
        transition: opacity 0.3s;
      }

      .tooltip:hover .tooltiptext {
        visibility: visible;
        opacity: 1;
      }
    </style>
  </head>

  <body class="fade-in">
    <button
      class="toggle-sidebar"
      id="toggleSidebar"
      aria-label="Toggle Sidebar"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="3" y1="12" x2="21" y2="12"></line>
        <line x1="3" y1="6" x2="21" y2="6"></line>
        <line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </button>

    <div class="app-container">
      <!-- Sidebar Navigation -->
      <nav class="sidebar">
        <div class="sidebar-header">
          <button class="toggle-sidebar" id="toggleSidebar">
            <span></span>
          </button>
        </div>
        <div class="sidebar-content">
          <div class="nav-section"><li class=""><a title="15ä¸ª JavaScript ä»£ç è§„èŒƒ" href="/md/15ä¸ª JavaScript ä»£ç è§„èŒƒ.html">60 15ä¸ª JavaScript ä»£ç è§„èŒƒ</a></li><li class=""><a title="8ä¸ª JavaScript é”™è¯¯å¤„ç†æŠ€å·§ Bug å‡å°‘ç™¾åˆ†ä¹‹ 75" href="/md/8ä¸ª JavaScript é”™è¯¯å¤„ç†æŠ€å·§ Bug å‡å°‘ç™¾åˆ†ä¹‹ 75.html">59 8ä¸ª JavaScript é”™è¯¯å¤„ç†æŠ€å·§ Bug å‡å°‘ç™¾åˆ†ä¹‹ 75</a></li><li class=""><a title="WebWorkerã€SharedWorker å’Œ ServiceWorker è¿˜åœ¨å‚»å‚»åˆ†ä¸æ¸…" href="/md/WebWorkerã€SharedWorker å’Œ ServiceWorker è¿˜åœ¨å‚»å‚»åˆ†ä¸æ¸….html">58 WebWorkerã€SharedWorker å’Œ ServiceWorker è¿˜åœ¨å‚»å‚»åˆ†ä¸æ¸…</a></li><li class=""><a title="ç”¨ JavaScript å®ç° Live2D è™šæ‹Ÿäººå£å‹åŒæ­¥" href="/md/ç”¨ JavaScript å®ç° Live2D è™šæ‹Ÿäººå£å‹åŒæ­¥.html">57 ç”¨ JavaScript å®ç° Live2D è™šæ‹Ÿäººå£å‹åŒæ­¥</a></li><li class=""><a title="ES6 ä¸­å¼•å…¥çš„ new.target ä½ çŸ¥é“å—" href="/md/ES6 ä¸­å¼•å…¥çš„ new.target ä½ çŸ¥é“å—.html">56 ES6 ä¸­å¼•å…¥çš„ new.target ä½ çŸ¥é“å—</a></li><li class=""><a title="ES æ–°ç‰¹æ€§å…¨è§£å¯†" href="/md/ES æ–°ç‰¹æ€§å…¨è§£å¯†.html">55 ES æ–°ç‰¹æ€§å…¨è§£å¯†</a></li><li class=""><a title="å‰ç«¯ reduce å‡½æ•°100 ç§ä½¿ç”¨æ–¹æ³•æ•´ç†" href="/md/å‰ç«¯ reduce å‡½æ•°100 ç§ä½¿ç”¨æ–¹æ³•æ•´ç†.html">54 å‰ç«¯ reduce å‡½æ•°100 ç§ä½¿ç”¨æ–¹æ³•æ•´ç†</a></li><li class=""><a title="proxy å’Œ Object.defineProperty()" href="/md/proxy å’Œ Object.defineProperty().html">53 proxy å’Œ Object.defineProperty()</a></li><li class="active"><a title="ä¸ºä½•è¯´ AbortController æ˜¯å‰ç«¯ä¸€æŠŠåˆ©å‰‘" href="/md/ä¸ºä½•è¯´ AbortController æ˜¯å‰ç«¯ä¸€æŠŠåˆ©å‰‘.html">52 ä¸ºä½•è¯´ AbortController æ˜¯å‰ç«¯ä¸€æŠŠåˆ©å‰‘</a></li><li class=""><a title="å‰ç«¯ Money ç±»" href="/md/å‰ç«¯ Money ç±».html">51 å‰ç«¯ Money ç±»</a></li><li class=""><a title="ç†è§£JSé‡Œçš„WeakMap" href="/md/ç†è§£JSé‡Œçš„WeakMap.html">50 ç†è§£JSé‡Œçš„WeakMap</a></li><li class=""><a title="tokenæ— æ„Ÿåˆ·æ–°çš„åŸºæœ¬å®ç°" href="/md/tokenæ— æ„Ÿåˆ·æ–°çš„åŸºæœ¬å®ç°.html">49 tokenæ— æ„Ÿåˆ·æ–°çš„åŸºæœ¬å®ç°</a></li><li class=""><a title="å‰ç«¯ä¸­çš„ File å’Œ Blobä¸¤ä¸ªå¯¹è±¡åˆ°åº•æœ‰ä»€ä¹ˆä¸åŒ" href="/md/å‰ç«¯ä¸­çš„ File å’Œ Blobä¸¤ä¸ªå¯¹è±¡åˆ°åº•æœ‰ä»€ä¹ˆä¸åŒ.html">48 å‰ç«¯ä¸­çš„ File å’Œ Blobä¸¤ä¸ªå¯¹è±¡åˆ°åº•æœ‰ä»€ä¹ˆä¸åŒ</a></li><li class=""><a title="js æ£€æµ‹ç½‘é¡µç©ºé—²çŠ¶æ€(ä¸€å®šæ—¶é—´å†…æ— æ“ä½œ)" href="/md/js æ£€æµ‹ç½‘é¡µç©ºé—²çŠ¶æ€(ä¸€å®šæ—¶é—´å†…æ— æ“ä½œ).html">47 js æ£€æµ‹ç½‘é¡µç©ºé—²çŠ¶æ€(ä¸€å®šæ—¶é—´å†…æ— æ“ä½œ)</a></li><li class=""><a title="Javascirpt æ—¶åŒº" href="/md/Javascirpt æ—¶åŒº.html">46 Javascirpt æ—¶åŒº</a></li><li class=""><a title="å®ç”¨çš„ Javascript å°åŠŸèƒ½" href="/md/å®ç”¨çš„ Javascript å°åŠŸèƒ½.html">45 å®ç”¨çš„ Javascript å°åŠŸèƒ½</a></li><li class=""><a title="å‰ç«¯å®ç°ç›´æ¥ç²˜è´´å›¾ç‰‡åˆ° html é¡µé¢" href="/md/å‰ç«¯å®ç°ç›´æ¥ç²˜è´´å›¾ç‰‡åˆ° html é¡µé¢.html">44 å‰ç«¯å®ç°ç›´æ¥ç²˜è´´å›¾ç‰‡åˆ° html é¡µé¢</a></li><li class=""><a title="å‰ç«¯å¦‚ä½•é™æ‚„æ‚„å½•åˆ¶ç”¨æˆ·çš„æ“ä½œè¿‡ç¨‹ï¼Œé™æ‚„æ‚„ä¸Šä¼ åˆ°æœåŠ¡å™¨" href="/md/å‰ç«¯å¦‚ä½•é™æ‚„æ‚„å½•åˆ¶ç”¨æˆ·çš„æ“ä½œè¿‡ç¨‹ï¼Œé™æ‚„æ‚„ä¸Šä¼ åˆ°æœåŠ¡å™¨.html">43 å‰ç«¯å¦‚ä½•é™æ‚„æ‚„å½•åˆ¶ç”¨æˆ·çš„æ“ä½œè¿‡ç¨‹ï¼Œé™æ‚„æ‚„ä¸Šä¼ åˆ°æœåŠ¡å™¨</a></li><li class=""><a title="JS ä¸­æ•°ç»„çš„ map é²œä¸ºäººçŸ¥ä½†ç»å¦™çš„ä½¿ç”¨æ–¹æ³•" href="/md/JS ä¸­æ•°ç»„çš„ map é²œä¸ºäººçŸ¥ä½†ç»å¦™çš„ä½¿ç”¨æ–¹æ³•.html">42 JS ä¸­æ•°ç»„çš„ map é²œä¸ºäººçŸ¥ä½†ç»å¦™çš„ä½¿ç”¨æ–¹æ³•</a></li><li class=""><a title="åœ¨ Web ä¸­åˆ¤æ–­é¡µé¢æ˜¯ä¸æ˜¯åˆ·æ–°" href="/md/åœ¨ Web ä¸­åˆ¤æ–­é¡µé¢æ˜¯ä¸æ˜¯åˆ·æ–°.html">41 åœ¨ Web ä¸­åˆ¤æ–­é¡µé¢æ˜¯ä¸æ˜¯åˆ·æ–°</a></li><li class=""><a title="Js å°æŠ€å·§" href="/md/Js å°æŠ€å·§.html">40 Js å°æŠ€å·§</a></li><li class=""><a title="split æ–¹æ³•æˆ‘ç®—æ˜¯ç™½å­¦äº†" href="/md/split æ–¹æ³•æˆ‘ç®—æ˜¯ç™½å­¦äº†.html">39 split æ–¹æ³•æˆ‘ç®—æ˜¯ç™½å­¦äº†</a></li><li class=""><a title="æ‹¼æ¥ URL" href="/md/æ‹¼æ¥ URL.html">38 æ‹¼æ¥ URL</a></li><li class=""><a title="ES14 ä¸­ 5 ä¸ªæœ€å…·å˜é©æ€§çš„ JavaScript ç‰¹æ€§" href="/md/ES14 ä¸­ 5 ä¸ªæœ€å…·å˜é©æ€§çš„ JavaScript ç‰¹æ€§.html">37 ES14 ä¸­ 5 ä¸ªæœ€å…·å˜é©æ€§çš„ JavaScript ç‰¹æ€§</a></li><li class=""><a title="JavaScript ä¸­è®¾ç½®å™¨å’Œè·å–å™¨" href="/md/JavaScript ä¸­è®¾ç½®å™¨å’Œè·å–å™¨.html">36 JavaScript ä¸­è®¾ç½®å™¨å’Œè·å–å™¨</a></li><li class=""><a title="éå¸¸å¼ºå¤§çš„æ ‡å‡† JavaScript API - AbortController" href="/md/éå¸¸å¼ºå¤§çš„æ ‡å‡† JavaScript API - AbortController.html">35 éå¸¸å¼ºå¤§çš„æ ‡å‡† JavaScript API - AbortController</a></li><li class=""><a title="æŒæ¡ JavaScript ä¸­çš„ Call å’Œ Apply" href="/md/æŒæ¡ JavaScript ä¸­çš„ Call å’Œ Apply.html">34 æŒæ¡ JavaScript ä¸­çš„ Call å’Œ Apply</a></li><li class=""><a title="ä¸€æ–‡æ•´æ‡‚äº‹ä»¶å¯¹è±¡ event çš„å¸¸ç”¨æ–¹æ³•" href="/md/ä¸€æ–‡æ•´æ‡‚äº‹ä»¶å¯¹è±¡ event çš„å¸¸ç”¨æ–¹æ³•.html">33 ä¸€æ–‡æ•´æ‡‚äº‹ä»¶å¯¹è±¡ event çš„å¸¸ç”¨æ–¹æ³•</a></li><li class=""><a title="7 ç§å¼€å‘äººå‘˜éƒ½åº”è¯¥çŸ¥é“çš„é«˜çº§ JavaScript æŠ€æœ¯" href="/md/7 ç§å¼€å‘äººå‘˜éƒ½åº”è¯¥çŸ¥é“çš„é«˜çº§ JavaScript æŠ€æœ¯.html">32 7 ç§å¼€å‘äººå‘˜éƒ½åº”è¯¥çŸ¥é“çš„é«˜çº§ JavaScript æŠ€æœ¯</a></li><li class=""><a title="å®ç°åŸºäºç”¨æˆ·æ“ä½œç³»ç»Ÿåå¥½çš„æ˜æš—ä¸»é¢˜åˆ‡æ¢" href="/md/å®ç°åŸºäºç”¨æˆ·æ“ä½œç³»ç»Ÿåå¥½çš„æ˜æš—ä¸»é¢˜åˆ‡æ¢.html">31 å®ç°åŸºäºç”¨æˆ·æ“ä½œç³»ç»Ÿåå¥½çš„æ˜æš—ä¸»é¢˜åˆ‡æ¢</a></li><li class=""><a title="JavaScript åŸç”Ÿå®ç°å›¾ç‰‡å¤åˆ¶ä¸ç²˜è´´" href="/md/JavaScript åŸç”Ÿå®ç°å›¾ç‰‡å¤åˆ¶ä¸ç²˜è´´.html">30 JavaScript åŸç”Ÿå®ç°å›¾ç‰‡å¤åˆ¶ä¸ç²˜è´´</a></li><li class=""><a title="é«˜ç²¾åº¦å®ç°å®šæ—¶å™¨" href="/md/é«˜ç²¾åº¦å®ç°å®šæ—¶å™¨.html">29 é«˜ç²¾åº¦å®ç°å®šæ—¶å™¨</a></li><li class=""><a title="è·å–ä¸Šä¼ è¿›åº¦çš„å‡ ç§æ–¹å¼" href="/md/è·å–ä¸Šä¼ è¿›åº¦çš„å‡ ç§æ–¹å¼.html">28 è·å–ä¸Šä¼ è¿›åº¦çš„å‡ ç§æ–¹å¼</a></li><li class=""><a title="èŠèŠç¦æ­¢é¡µé¢æ»šåŠ¨çš„å‡ ç§æ–¹æ³•" href="/md/èŠèŠç¦æ­¢é¡µé¢æ»šåŠ¨çš„å‡ ç§æ–¹æ³•.html">27 èŠèŠç¦æ­¢é¡µé¢æ»šåŠ¨çš„å‡ ç§æ–¹æ³•</a></li><li class=""><a title="ç¼“å­˜ http é”™è¯¯ï¼Œé¿å…å¤šæ¬¡æŠ¥é”™æç¤º" href="/md/ç¼“å­˜ http é”™è¯¯ï¼Œé¿å…å¤šæ¬¡æŠ¥é”™æç¤º.html">26 ç¼“å­˜ http é”™è¯¯ï¼Œé¿å…å¤šæ¬¡æŠ¥é”™æç¤º</a></li><li class=""><a title="æ–‡ä»¶æ“ä½œ" href="/md/æ–‡ä»¶æ“ä½œ.html">25 æ–‡ä»¶æ“ä½œ</a></li><li class=""><a title="æ•°æ®ç±»å‹åˆ¤æ–­æ–¹æ³•" href="/md/æ•°æ®ç±»å‹åˆ¤æ–­æ–¹æ³•.html">24 æ•°æ®ç±»å‹åˆ¤æ–­æ–¹æ³•</a></li><li class=""><a title="å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡" href="/md/å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡.html">23 å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡</a></li><li class=""><a title="åä¸ªè¶…çº§å¥½ç”¨çš„ Js æŠ€å·§" href="/md/åä¸ªè¶…çº§å¥½ç”¨çš„ Js æŠ€å·§.html">22 åä¸ªè¶…çº§å¥½ç”¨çš„ Js æŠ€å·§</a></li><li class=""><a title="å‰ç«¯çš„ç½‘ç»œçŠ¶æ€" href="/md/å‰ç«¯çš„ç½‘ç»œçŠ¶æ€.html">21 å‰ç«¯çš„ç½‘ç»œçŠ¶æ€</a></li><li class=""><a title="ä½¿ç”¨ JavaScript åŠ è½½å­—ä½“" href="/md/ä½¿ç”¨ JavaScript åŠ è½½å­—ä½“.html">20 ä½¿ç”¨ JavaScript åŠ è½½å­—ä½“</a></li><li class=""><a title="ä½ éœ€è¦çŸ¥é“çš„ Symbols" href="/md/ä½ éœ€è¦çŸ¥é“çš„ Symbols.html">19 ä½ éœ€è¦çŸ¥é“çš„ Symbols</a></li><li class=""><a title="Set å’Œ WeakSet çš„ç”¨æ³•å’ŒåŒºåˆ«" href="/md/Set å’Œ WeakSet çš„ç”¨æ³•å’ŒåŒºåˆ«.html">18 Set å’Œ WeakSet çš„ç”¨æ³•å’ŒåŒºåˆ«</a></li><li class=""><a title="sessionStorage èƒ½åœ¨å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´å…±äº«æ•°æ®å—" href="/md/sessionStorage èƒ½åœ¨å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´å…±äº«æ•°æ®å—.html">17 sessionStorage èƒ½åœ¨å¤šä¸ªæ ‡ç­¾é¡µä¹‹é—´å…±äº«æ•°æ®å—</a></li><li class=""><a title="scrollIntoview" href="/md/scrollIntoview.html">16 scrollIntoview</a></li><li class=""><a title="reduce çš„é«˜çº§ç”¨æ³•" href="/md/reduce çš„é«˜çº§ç”¨æ³•.html">15 reduce çš„é«˜çº§ç”¨æ³•</a></li><li class=""><a title="js å°ä¼—ä¸”å¥½ç”¨çš„æŠ€å·§" href="/md/js å°ä¼—ä¸”å¥½ç”¨çš„æŠ€å·§.html">14 js å°ä¼—ä¸”å¥½ç”¨çš„æŠ€å·§</a></li><li class=""><a title="js å¦‚ä½•ç›‘å¬ä¸€ä¸ªå˜é‡æ”¹å˜" href="/md/js å¦‚ä½•ç›‘å¬ä¸€ä¸ªå˜é‡æ”¹å˜.html">13 js å¦‚ä½•ç›‘å¬ä¸€ä¸ªå˜é‡æ”¹å˜</a></li><li class=""><a title="javascript å¥‡è‘©è¡Œä¸ºå¤§èµ" href="/md/javascript å¥‡è‘©è¡Œä¸ºå¤§èµ.html">12 javascript å¥‡è‘©è¡Œä¸ºå¤§èµ</a></li><li class=""><a title="FileReader" href="/md/FileReader.html">11 FileReader</a></li><li class=""><a title="EventSource" href="/md/EventSource.html">10 EventSource</a></li><li class=""><a title="document.referrer æ‹¦æˆªé—®é¢˜" href="/md/document.referrer æ‹¦æˆªé—®é¢˜.html">09 document.referrer æ‹¦æˆªé—®é¢˜</a></li><li class=""><a title="7 ä¸ª Promise é™æ€æ–¹æ³•" href="/md/7 ä¸ª Promise é™æ€æ–¹æ³•.html">08 7 ä¸ª Promise é™æ€æ–¹æ³•</a></li><li class=""><a title="è°ˆè°ˆå‰ç«¯è·¯ç”±çš„å®ç°åŸç† hash ï¼† history" href="/md/è°ˆè°ˆå‰ç«¯è·¯ç”±çš„å®ç°åŸç† hash ï¼† history.html">07 è°ˆè°ˆå‰ç«¯è·¯ç”±çš„å®ç°åŸç† hash ï¼† history</a></li><li class=""><a title="å±æ€§çš„ getter å’Œ setter" href="/md/å±æ€§çš„ getter å’Œ setter.html">06 å±æ€§çš„ getter å’Œ setter</a></li><li class=""><a title="é«˜æ•ˆæ£€æŸ¥ JS å¯¹è±¡ä¸­çš„é”®æ˜¯å¦å­˜åœ¨" href="/md/é«˜æ•ˆæ£€æŸ¥ JS å¯¹è±¡ä¸­çš„é”®æ˜¯å¦å­˜åœ¨.html">05 é«˜æ•ˆæ£€æŸ¥ JS å¯¹è±¡ä¸­çš„é”®æ˜¯å¦å­˜åœ¨</a></li><li class=""><a title="å®ç°é¼ æ ‡æ»šè½®ç¼©æ”¾ SVG å†…å®¹" href="/md/å®ç°é¼ æ ‡æ»šè½®ç¼©æ”¾ SVG å†…å®¹.html">04 å®ç°é¼ æ ‡æ»šè½®ç¼©æ”¾ SVG å†…å®¹</a></li><li class=""><a title="ä½¿ç”¨ JS å‘ç°æœ‰ SVG ä¸­æ·»åŠ å…ƒç´ " href="/md/ä½¿ç”¨ JS å‘ç°æœ‰ SVG ä¸­æ·»åŠ å…ƒç´ .html">03 ä½¿ç”¨ JS å‘ç°æœ‰ SVG ä¸­æ·»åŠ å…ƒç´ </a></li><li class=""><a title="JS å•è¡Œä»£ç é›†" href="/md/JS å•è¡Œä»£ç é›†.html">02 JS å•è¡Œä»£ç é›†</a></li><li class=""><a title="7 ç§ä½è¿ç®—ç¬¦çš„ç¥å¥‡ç”¨æ³•" href="/md/7 ç§ä½è¿ç®—ç¬¦çš„ç¥å¥‡ç”¨æ³•.html">01 7 ç§ä½è¿ç®—ç¬¦çš„ç¥å¥‡ç”¨æ³•</a></li></div>
        </div>
      </nav>

      <!-- Main Content Area -->
      <main class="main-content">
        <header class="content-header">
          <div class="header-left">
            <h1 class="page-title">ä¸ºä½•è¯´ AbortController æ˜¯å‰ç«¯ä¸€æŠŠåˆ©å‰‘</h1>
            <p class="time">HaoTian Â· 2025-01-04 22:08:55</p>
          </div>
          <div class="header-right">
            <div class="tag-container">
              <span class="tag">JavaScript</span>
            </div>
            <button
              id="themeToggle"
              class="theme-toggle"
              aria-label="Toggle theme"
            >
              <svg
                class="sun-icon"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
              <svg
                class="moon-icon"
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
                ></path>
              </svg>
            </button>
            <button class="theme-toggle" aria-label="Toggle theme" style="width: 36px;height: 36px;" onclick="window.location.href='/md';">
              <svg t="1737442501710" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5258" width="20" height="20"><path d="M883.773793 626.047476c-17.308201 0-31.408337 14.029528-31.408337 31.304983l0 207.437469c0 17.204847-14.098089 31.302937-31.406291 31.302937L203.040834 896.092865c-17.340947 0-31.408337-14.098089-31.408337-31.302937L171.632497 657.352459c0-17.275455-14.099113-31.304983-31.408337-31.304983-17.380856 0-31.444153 14.029528-31.444153 31.304983l0 207.437469c0 51.773154 42.261523 93.91188 94.260827 93.91188l617.918331 0c52.031027 0 94.259804-42.139749 94.259804-93.91188L915.21897 657.352459C915.21897 640.077004 901.152603 626.047476 883.773793 626.047476L883.773793 626.047476zM230.262826 614.286618c55.523571 0 104.556311-27.674293 134.394896-69.762877 32.487925 46.451962 86.303598 77.0744 147.343813 77.0744 61.036122 0 114.846678-30.623461 147.306974-77.0744 29.943986 42.018999 78.902024 69.762877 134.426619 69.762877 90.948385 0 164.968216-73.77526 164.968216-164.371628 0-11.062963-2.342348-22.859637-5.130857-35.178197-0.209778-1.134847 0.031722-2.26867-0.277316-3.38612l-0.629333-2.267647c-0.24764-0.924045-0.140193-1.535983-0.352017-2.547009-0.138146-0.505513-0.521886-0.87288-0.695848-1.39579l-85.364203-316.671313c-3.699252-13.645788-16.051581-23.172769-30.293957-23.172769L187.965487 65.296145c-14.238282 0-26.665313 9.526981-30.360472 23.24133L72.309374 405.1566c-0.103354 0.50756-0.48607 0.820692-0.62524 1.309832-0.210801 0.942465-0.107447 1.639337-0.349971 2.511193l-0.62524 2.373047c-0.318248 1.11745 0 2.25025-0.210801 3.38612-2.863211 12.31856-5.201465 24.115234-5.201465 35.178197C65.295634 540.511357 139.315464 614.286618 230.262826 614.286618L230.262826 614.286618z" fill="currentColor" p-id="5259"></path></svg>
            </button>
          </div>
        </header>

        <!-- Article Content -->
        <article
          class="content-body md md "
        >
          <img src="../imgs/133/10.webp" />

<h2>1. é€šè¿‡ AbortController æå‰ç»ˆæ­¢ fetch</h2>
<p>é¦–å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼Œå…¶ä½¿ç”¨ AbortController æ¥å®ç°å¯ä»¥æå‰ä¸­æ­¢çš„ fetchï¼š</p>
<pre><code class="language-js">fetchButton.onclick = async () =&gt; {
  const controller = new AbortController();
  // æ·»åŠ å–æ¶ˆæŒ‰é’®
  abortButton.onclick = () =&gt; controller.abort();
  try {
    const r = await fetch(&quot;/json&quot;, { signal: controller.signal });
    const json = await r.json();
    // è¿™é‡Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘
  } catch (e) {
    const isUserAbort = e.name === &quot;AbortError&quot;;
    // å¦‚æœæ˜¯ AbortController å–æ¶ˆçš„åˆ™æ˜¯ AbortErrorï¼ˆä¸€ç§ DOMExceptionï¼‰
  }
};
</code></pre>
<p>ä¸Šé¢ç¤ºä¾‹å±•ç¤ºäº†åœ¨ <code>AbortController</code> å‡ºç°ä¹‹å‰ä¸å¯èƒ½å®ç°çš„äº‹æƒ…ï¼Œå³ <code>ä¸»åŠ¨å–æ¶ˆç½‘ç»œè¯·æ±‚</code>ã€‚æµè§ˆå™¨å°†æå‰ç»ˆæ­¢ fetchï¼Œä»è€ŒèŠ‚çœç”¨æˆ·ç½‘ç»œå¸¦å®½ã€‚å½“ç„¶ï¼Œæå‰ç»ˆæ­¢ä¹Ÿä¸å¿…éè¦ç”±ç”¨æˆ·æ‰‹åŠ¨å‘èµ·ã€‚</p>
<p>ä¸Šé¢ç¤ºä¾‹ä¸­ <code>controller.signal</code> è¿”å›çš„æ˜¯ <code>AbortSignal</code>ï¼Œå…¶ä»£è¡¨ä¸€ä¸ªä¿¡å·å¯¹è±¡ï¼Œå…¶å…è®¸å¼€å‘è€…ä¸å¼‚æ­¥æ“ä½œï¼ˆä¾‹å¦‚ fetch è¯·æ±‚ï¼‰è¿›è¡Œé€šä¿¡ï¼Œå¹¶åœ¨éœ€è¦æ—¶é€šè¿‡ AbortController å¯¹è±¡ä¸­æ­¢ã€‚</p>
<p>å¦‚æœå¼€å‘è€…æƒ³ä»å¤šä¸ªä¿¡å·ä¸­ä¸­æ­¢ï¼Œå¯ä»¥ä½¿ç”¨ <code>AbortSignal.any()</code> ç»„åˆæˆå•ä¸ªä¿¡å·ï¼Œæ¯”å¦‚ä¸‹é¢çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-js">try {
  const controller = new AbortController();
  const timeoutSignal = AbortSignal.timeout(5000);
  const res = await fetch(url, {
    // This will abort the fetch when either signal is aborted
    signal: AbortSignal.any([controller.signal, timeoutSignal]),
  });
  const body = await res.json();
} catch (e) {
  if (e.name === &quot;AbortError&quot;) {
    // Notify the user of abort.
  } else if (e.name === &quot;TimeoutError&quot;) {
    // Notify the user of timeout
  } else {
    // A network error, or some other problem.
    console.log(`Type: ${e.name}, Message: ${e.message}`);
  }
}
</code></pre>
<p>AbortController å’Œ AbortSignal ä¸¤è€…ç”¨é€”è¿˜æ˜¯æœ‰ä¸€å®šçš„åŒºåˆ«ï¼š</p>
<ul>
<li><code>AbortController</code>ï¼šå…è®¸é€šè¿‡ controller.abort() æ˜¾å¼ä¸­æ­¢å…¶é™„åŠ çš„ä¿¡å·</li>
<li><code>AbortSignal</code> ï¼šä¸èƒ½ç›´æ¥ä¸­æ­¢ï¼Œä½†å¼€å‘è€…å¯ä»¥å°†å…¶ä¼ é€’ç»™ fetch() ä¹‹ç±»çš„è°ƒç”¨æˆ–ç›´æ¥ç›‘å¬å…¶ä¸­æ­¢çŠ¶æ€ã€‚</li>
</ul>
<p>å¯ä»¥ä½¿ç”¨ <code>signal.aborted</code> æ£€æŸ¥å…¶çŠ¶æ€ï¼Œæˆ–ä¸º <code>abort</code> äº‹ä»¶æ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œä¾‹å¦‚ï¼šfetch() åœ¨å†…éƒ¨æ‰§è¡Œæ­¤æ“ä½œ ã€‚</p>
<pre><code class="language-js">if (signal.aborted) {}
signal.addEventListener(&#39;abort&#39;, () =&gt; ());
</code></pre>
<p>AbortController å–æ¶ˆè¯·æ±‚åæœåŠ¡å™¨å°±ä¸ä¼šç»§ç»­å¤„ç†è¯¥è¯·æ±‚ï¼Œä¹Ÿä¸ä¼šå‘é€å“åº”ï¼Œä»è€Œé¿å…äº†ä¸å¿…è¦çš„æ•°æ®ä¼ è¾“ã€‚åŒæ—¶ï¼Œé’ˆå¯¹å®¢æˆ·ç«¯æ¥è¯´ä¼šå‡å°‘å¹¶å‘çš„è¿æ¥æ•°é‡ï¼Œæé«˜é¡µé¢çš„å“åº”æ€§èƒ½ã€‚</p>
<h2>2.AbortController çš„å…¸å‹ä½¿ç”¨åœºæ™¯</h2>
<h3>2.1 ä¸­æ­¢ WebSocket ç­‰ä¼ ç»Ÿå¯¹è±¡</h3>
<p>å¾ˆå¤šè€ç‰ˆæœ¬çš„ DOM API å…¶å®å¹¶ä¸æ”¯æŒ AbortSignalï¼Œä¾‹å¦‚ï¼šWebSocketï¼Œå…¶åªæœ‰ä¸€ä¸ª <code>.close()</code> æ–¹æ³•ç”¨äºåœ¨è¯·æ±‚å®Œæˆåå…³é—­è¿æ¥ã€‚æ­¤æ—¶ï¼Œå¼€å‘è€…å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ˜¾å¼å–æ¶ˆè¯·æ±‚ï¼š</p>
<pre><code class="language-js">function abortableSocket(url, signal) {
  const w = new WebSocket(url);
  if (signal.aborted) {
    w.close();
    // å·²ç»å–æ¶ˆï¼Œç›´æ¥å¤±è´¥
  }
  signal.addEventListener(&quot;abort&quot;, () =&gt; w.close());
  return w;
}
</code></pre>
<p>è¯·æ³¨æ„ï¼Œå¦‚æœå·²ç»ä¸­æ­¢ï¼ŒAbortSignal ä¸ä¼šè§¦å‘å…¶ â€œabortâ€ï¼Œå› æ­¤å¿…é¡»æ£€æŸ¥æ˜¯å¦å·²ç» abortedï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ç«‹å³ .close()ã€‚</p>
<h3>2.2 ç§»é™¤äº‹ä»¶å¤„ç†ç¨‹åº</h3>
<p>åœ¨é€šè¿‡ removeEventListener ç§»é™¤ DOM äº‹ä»¶å¤„ç†å‡½æ•°æ—¶ï¼Œå¼€å‘è€…å¿…é¡»ä¿è¯ç¬¬äºŒä¸ªäº‹ä»¶å¤„ç†å‡½æ•°æ˜¯åŒä¸€ä¸ªã€‚</p>
<pre><code class="language-js">window.addEventListener(&quot;resize&quot;, () =&gt; doSomething());
// addEventListener å’Œ removeEventListener éåŒä¸€ä¸ªå‡½æ•°
window.removeEventListener(&quot;resize&quot;, () =&gt; doSomething());
</code></pre>
<p>æœ‰äº† AbortController åï¼Œè¿™ä¸€åˆ‡å˜å¾—éå¸¸ç®€å•ï¼Œå¼€å‘è€…åªéœ€è¦å°† signal ä¼ é€’ç»™ addEventListener çš„ç¬¬ä¸‰ä¸ªå‚æ•°å³å¯ã€‚</p>
<pre><code class="language-js">const controller = new AbortController();
const { signal } = controller;
window.addEventListener(&quot;resize&quot;, () =&gt; doSomething(), { signal });
// é€šè¿‡. abort() æ–¹æ³•ç§»é™¤äº‹ä»¶å¤„ç†å‡½æ•°
controller.abort();
</code></pre>
<p>å½“ç„¶ï¼Œé’ˆå¯¹æ—§ç‰ˆæœ¬çš„æµè§ˆå™¨å¯ä»¥å°è¯•æ·»åŠ  Polyfill ä»¥æ”¯æŒ AbortControllerã€‚</p>
<h3>2.3 React hooks ä¸­çš„å¼‚æ­¥ä»»åŠ¡</h3>
<p>åœ¨ React ä¸­ï¼Œå¦‚æœ Effect åœ¨å†æ¬¡è§¦å‘ä¹‹å‰æ²¡æœ‰å®Œæˆï¼Œå¼€å‘è€…ä¸€èˆ¬ä¸å®¹æ˜“å‘ç°ï¼Œæ­¤æ—¶ Effect ä¼šå¹¶è¡Œè¿è¡Œã€‚</p>
<pre><code class="language-js">function FooComponent({something}) {
  useEffect(async () =&gt; {
    const j = await fetch(url + something);
    // do something with J
  }, [something]);
  return &lt;&gt;...&lt;&gt;;
}
</code></pre>
<p>æ­¤æ—¶ï¼Œå¼€å‘è€…å¯ä»¥åšçš„æ˜¯åˆ›å»ºä¸€ä¸ª AbortControllerï¼Œæ¯å½“ä¸‹ä¸€ä¸ª useEffect è°ƒç”¨è¿è¡Œæ—¶å°±ä¸­æ­¢ä¸Šä¸€ä¸ªè¯·æ±‚ï¼š</p>
<pre><code class="language-js">function FooComponent({something}) {
  useEffect(() =&gt; {
    const controller = new AbortController();
    const {signal} = controller;
    const p = (async () =&gt; {
      // çœŸæ­£æ‰§è¡Œçš„é€»è¾‘
      const j = await fetch(url + something, { signal});
      // è¿™é‡Œå¤„ç†è¿”å›å€¼
    })();
    return () =&gt; controller.abort();
  }, [something]);
  return &lt;&gt;...&lt;&gt;;
}
</code></pre>
<h3>2.4 React hooks ä¸­çš„å¼‚æ­¥ä»»åŠ¡</h3>
<p>Node.js é‡Œæ–°ç‰ˆçš„ setTimeout å¯ä»¥ç”¨ AbortController å–æ¶ˆï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<pre><code class="language-js">const { setTimeout: setTimeoutPromise } = require(&quot;node:timers/promises&quot;);
const ac = new AbortController();
const signal = ac.signal;
// ğŸ“¢ è¿™é‡Œä¼ å…¥äº† AbortSignal
setTimeoutPromise(1000, &quot;foobar&quot;, { signal })
  .then(console.log)
  .catch((err) =&gt; {
    if (err.name === &quot;AbortError&quot;) console.log(&quot;The timeout was aborted&quot;);
  });
ac.abort();
</code></pre>
<p>ä¸è¿‡è¿™ä¸ª Promise ç‰ˆçš„ setTimeout å¹¶ä¸ä¼ å…¥å›è°ƒï¼Œå›è°ƒéœ€è¦åœ¨ .then() é‡Œæˆ–è€… await åé¢è‡ªå·±è°ƒç”¨ã€‚</p>
<p>ä½†æ˜¯ï¼Œæµè§ˆå™¨çš„ setTimeout ç›®å‰å¹¶ä¸æ”¯æŒ AbortControllerï¼Œå¯èƒ½æ˜¯åŸå› æ˜¯å…¶å·²ç»è®¾è®¡äº†æ›´å…ˆè¿›çš„ <code>scheduler.postTask() API</code>ï¼Œè¯¥æ–¹æ³•ç”¨äºæ ¹æ®ä¼˜å…ˆçº§æ·»åŠ è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå› æ­¤ setTimeout æ²¡ç†ç”±å¢å¼ºäº†ã€‚</p>
<pre><code class="language-js">// Declare a TaskController with default priority
const abortTaskController = new TaskController();
// Post task passing the controller&#39;s signal
scheduler
  .postTask(() =&gt; console.log(&quot;Task executing&quot;), {
    signal: abortTaskController.signal,
  })
  .then((taskResult) =&gt; console.log(`${taskResult}`)) //This won&#39;t run!
  .catch((error) =&gt; console.error(&quot;Error:&quot;, error)); // Log the error
// Abort the task
abortTaskController.abort();
</code></pre>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ <code>TaskController</code> æ˜¯ AbortController çš„å­çº§ï¼Œé™¤äº†å¯ä»¥è°ƒç”¨ abort() å–æ¶ˆ taskï¼Œè¿˜å¯ä»¥é€šè¿‡ <code>setPriority()</code> æ–¹æ³•ä¸­é€”ä¿®æ”¹ task çš„ä¼˜å…ˆçº§ï¼Œå¦‚æœä¸éœ€è¦æ§åˆ¶ä¼˜å…ˆçº§ï¼Œåˆ™å¯ä»¥ç›´æ¥ä½¿ç”¨ AbortControllerã€‚</p>

        </article>
      </main>

      <!-- Table of Contents Sidebar -->
      <aside class="toc-sidebar">
        <div class="toc-header">
          <h3>Table of Contents</h3>
        </div>
        <div class="toc-content" id="tocContent">
          <!-- TOC will be generated dynamically -->
        </div>
      </aside>
    </div>

    <div class="body_bg"></div>
    <div class="zoom-overlay"></div>

    <button id="backToTop" class="back-to-top" aria-label="Back to top">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M12 19V5M5 12l7-7 7 7" />
      </svg>
    </button>

    <style>
      .zoom-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: none;
        z-index: 1000;
        cursor: zoom-out;
      }
      .zoomed-image {
        position: fixed;
        z-index: 1001;
        will-change: transform;
        cursor: zoom-out;
        max-width: 90vw;
        max-height: 90vh;
        object-fit: contain;
      }
      .back-button {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 50px;
        height: 50px;
        border-radius: 100%;
        background-color: #07a;
        border: none;
        color: #333;
        text-decoration: none;
        font-size: 14px;
        margin-bottom: 16px;
        cursor: pointer;
        transition: background-color 0.2s;
        position: fixed !important;
        top: 30px;
        right: 30px;
        z-index: 10;
        display: none;
      }
      .back-button svg {
        width: 50%;
        height: 50%;
      }
      .back-button:hover {
        opacity: 0.8;
      }
      .layout {
        position: relative;
        z-index: 1;
      }
      .back-to-top {
        position: fixed;
        bottom: 2rem;
        right: 340px;
        background: linear-gradient(
          135deg,
          var(--accent),
          rgba(59, 130, 246, 0.8)
        );
        color: white;
        border: none;
        width: 3rem;
        height: 3rem;
        border-radius: 50%;
        cursor: pointer;
        display: none;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
      }

      .back-to-top svg {
        width: 1.5rem;
        height: 1.5rem;
        stroke: currentColor;
        transition: transform 0.3s ease;
      }

      .back-to-top:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
        background: linear-gradient(135deg, var(--accent), #2563eb);
      }

      .back-to-top:hover svg {
        transform: translateY(-2px);
      }

      .dark .back-to-top {
        background: linear-gradient(135deg, #4b5563, #1f2937);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .dark .back-to-top:hover {
        background: linear-gradient(135deg, #4b5563, #111827);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
      }
    </style>
    <script defer src="../js/prism.min.js"></script>
    <script>
      // Sidebar Toggle
      const toggleBtn = document.getElementById("toggleSidebar");
      const sidebar = document.querySelector(".sidebar");
      const mainContent = document.querySelector(".main-content");

      function toggleSidebar() {
        sidebar.classList.toggle("hidden");
        // Store sidebar state in localStorage
        localStorage.setItem(
          "sidebarHidden",
          sidebar.classList.contains("hidden")
        );
      }

      toggleBtn.addEventListener("click", toggleSidebar);

      // Keyboard shortcut (Ctrl + B)
      window.addEventListener("keydown", (e) => {
        if (e.ctrlKey && e.key === "b") {
          e.preventDefault(); // Prevent browser's default behavior
          toggleSidebar();
        }
      });

      // Restore sidebar state from localStorage
      document.addEventListener("DOMContentLoaded", () => {
        const sidebarHidden = localStorage.getItem("sidebarHidden") === "true";
        if (sidebarHidden) {
          sidebar.classList.add("hidden");
        }
      });

      // Generate Table of Contents
      function generateTOC() {
        const article = document.querySelector(".content-body");
        const headings = article.querySelectorAll("h1, h2, h3, h4");
        const tocContent = document.getElementById("tocContent");
        const toc = document.createElement("ul");

        headings.forEach((heading, index) => {
          const id = `heading-${index}`;
          heading.id = id;

          const li = document.createElement("li");
          const a = document.createElement("a");
          a.href = `#${id}`;
          a.textContent = heading.textContent;
          a.className = `toc-level-${heading.tagName.toLowerCase()}`;

          li.appendChild(a);
          toc.appendChild(li);
        });

        tocContent.appendChild(toc);
      }

      // Initialize TOC
      document.addEventListener("DOMContentLoaded", generateTOC);

      // Image zoom with FLIP animation
      const overlay = document.querySelector(".zoom-overlay");
      let activeImage = null;

      document.querySelectorAll("img").forEach((img) => {
        if (img.closest("a")) return; // Skip images that are inside links
        img.style.cursor = "zoom-in";
        img.addEventListener("click", handleImageClick);
      });

      function handleImageClick(event) {
        const img = event.target;

        if (activeImage) {
          // If an image is already zoomed, unzoom it
          unzoomImage();
          return;
        }

        // Get the initial position and size
        const rect = img.getBoundingClientRect();
        const first = {
          x: rect.left,
          y: rect.top,
          width: rect.width,
          height: rect.height,
        };

        // Create a clone of the image
        const clone = img.cloneNode();
        clone.classList.add("zoomed-image");
        document.body.appendChild(clone);

        // Position the clone exactly over the original
        clone.style.position = "fixed";
        clone.style.left = `${first.x}px`;
        clone.style.top = `${first.y}px`;
        clone.style.width = `${first.width}px`;
        clone.style.height = `${first.height}px`;
        clone.style.margin = "0";
        clone.style.transformOrigin = "top left";

        // Show the overlay
        overlay.style.display = "block";

        // Calculate the final position and scale
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        const targetWidth = Math.min(img.naturalWidth, viewportWidth * 0.9);
        const targetHeight = Math.min(img.naturalHeight, viewportHeight * 0.9);
        const scaleX = targetWidth / first.width;
        const scaleY = targetHeight / first.height;
        const scale = Math.min(scaleX, scaleY);

        const last = {
          width: first.width * scale,
          height: first.height * scale,
        };
        last.x = (viewportWidth - last.width) / 2;
        last.y = (viewportHeight - last.height) / 2;

        // Calculate and apply the transform
        const dx = last.x - first.x;
        const dy = last.y - first.y;

        requestAnimationFrame(() => {
          clone.style.transform = `translate(${dx}px, ${dy}px) scale(${scale})`;
          clone.style.transition = "transform 0.3s ease-out";
        });

        activeImage = { original: img, clone: clone };

        // Add click handlers for closing
        clone.addEventListener("click", unzoomImage);
        overlay.addEventListener("click", unzoomImage);
      }

      function unzoomImage() {
        if (!activeImage) return;

        const { original, clone } = activeImage;
        const rect = original.getBoundingClientRect();

        // Animate back to the original position
        clone.style.transform = `translate(0, 0) scale(1)`;

        // Clean up after the animation
        clone.addEventListener(
          "transitionend",
          () => {
            clone.remove();
            overlay.style.display = "none";
          },
          { once: true }
        );

        activeImage = null;
      }

      // ç›‘å¬ ctrl + b
      window.addEventListener("keydown", (e) => {
        const leftDom = document.querySelector(".sidebar");
        if (e.ctrlKey && e.key === "b") {
          leftDom.classList.toggle("hidden");
        }
      });

      // Modal
      // const modal = document.getElementById("myModal");
      // const modalContent = modal.querySelector(".modal-content");
      // const openModal = document.getElementById("openModal");
      // const close = modal.querySelector(".close");

      // openModal.addEventListener("click", () => {
      //     modal.style.display = "block";
      // });

      // close.addEventListener("click", () => {
      //     modal.style.display = "none";
      // });

      // window.addEventListener("click", (e) => {
      //     if (e.target === modal) {
      //         modal.style.display = "none";
      //     }
      // });

      // Back to top button
      const backToTop = document.getElementById("backToTop");
      window.addEventListener("scroll", () => {
        if (window.scrollY > 200) {
          backToTop.style.display = "block";
        } else {
          backToTop.style.display = "none";
        }
      });

      backToTop.addEventListener("click", () => {
        window.scrollTo({ top: 0, behavior: "smooth" });
      });

      // Theme toggle
      document.addEventListener("DOMContentLoaded", () => {
        const themeToggle = document.getElementById("themeToggle");
        const html = document.documentElement;
        const prismTheme = document.getElementById("prismTheme");

        // Function to update theme and stylesheet
        function updateTheme(theme) {
          html.className = theme;
          prismTheme.href = `../css/prism${theme === "dark" ? "2" : ""}.css`;
          localStorage.setItem("theme", theme);
        }

        // Check for saved theme preference
        const savedTheme = localStorage.getItem("theme") || "light";
        updateTheme(savedTheme);

        themeToggle.addEventListener("click", () => {
          const currentTheme = html.className;
          const newTheme = currentTheme === "light" ? "dark" : "light";
          updateTheme(newTheme);
        });
      });
    </script>
  </body>
</html>
