<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"
      name="viewport"
    />
    <title>ä¸è¦é”™è¿‡ES2024(ES15)è¿™5ä¸ªæ–°ç‰¹æ€§</title>
    <link rel="shortcut icon" href="../code.svg" type="image/x-icon" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&display=fallback"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../css/prism.css" />
    <link rel="stylesheet" href="../css/edit.css" />
    
  </head>
  
  <body>
    <div class="layout">
      <div class="layout__main">
        <div class="layout__main_left" style="order: 0">
          <div class="layout__main_left-switch"></div>
          <ul>
            <li class="active"><a title="ä¸è¦é”™è¿‡ES2024(ES15)è¿™5ä¸ªæ–°ç‰¹æ€§" href="/md/ä¸è¦é”™è¿‡ES2024(ES15)è¿™5ä¸ªæ–°ç‰¹æ€§.html">05 ä¸è¦é”™è¿‡ES2024(ES15)è¿™5ä¸ªæ–°ç‰¹æ€§</a></li><li class=""><a title="JS å®‰å…¨æ“ä½œç¬¦" href="/md/JS å®‰å…¨æ“ä½œç¬¦.html">04 JS å®‰å…¨æ“ä½œç¬¦</a></li><li class=""><a title="å®‰å…¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ–°çš„ JavaScript ææ¡ˆè®©ä½ å‘Šåˆ« try catch" href="/md/å®‰å…¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ–°çš„ JavaScript ææ¡ˆè®©ä½ å‘Šåˆ« try catch.html">03 å®‰å…¨èµ‹å€¼è¿ç®—ç¬¦ï¼Œæ–°çš„ JavaScript ææ¡ˆè®©ä½ å‘Šåˆ« try catch</a></li><li class=""><a title="ä¸€ä¸ªå…¨æ–°çš„ JavaScript äº‹ä»¶" href="/md/ä¸€ä¸ªå…¨æ–°çš„ JavaScript äº‹ä»¶.html">02 ä¸€ä¸ªå…¨æ–°çš„ JavaScript äº‹ä»¶</a></li><li class=""><a title="åŸç”ŸåµŒå¥—CSSç‰¹æ€§" href="/md/åŸç”ŸåµŒå¥—CSSç‰¹æ€§.html">01 åŸç”ŸåµŒå¥—CSSç‰¹æ€§</a></li>
          </ul>
        </div>
        <div
          style="order: 1"
          class="layout__main_right md "
        >
          <div class="page-header">
            <h1>ä¸è¦é”™è¿‡ES2024(ES15)è¿™5ä¸ªæ–°ç‰¹æ€§</h1>
            <p class="time">HaoTian Â· 2025-01-13 13:01:58</p>
          </div>
          <h2>1. Promise.withResolvers</h2>
<p>ä¸ç¬¨é‡çš„ Promise æ„é€ æ–¹æ³•è¯´å†è§å§ã€‚Promise.withResolvers æä¾›äº†ä¸€ç§æ›´ä¸ºç›´æ¥çš„æ–¹æ³•æ¥åˆ›å»º Promiseï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥ä»å¤–éƒ¨è®¿é—® resolve å’Œ reject å›è°ƒã€‚</p>
<pre><code class="language-js">const { promise, resolve, reject } = Promise.withResolvers();

setTimeout(() =&gt; resolve(&quot;Resolved after 2 seconds&quot;), 2000);
promise.then((value) =&gt; console.log(value));
</code></pre>
<p>è¿™ä½¿å¾—å¼‚æ­¥æ“ä½œæ›´åŠ é¡ºç•…ã€‚</p>
<p><strong>ä»¥ä¸‹å†…å®¹ä¸ºç¿»è¯‘äººå‘˜è¡¥å……å†…å®¹ï¼š</strong></p>
<p>å…ˆå›é¡¾ä¸€ä¸‹ä¼ ç»Ÿçš„æ–¹å¼ã€‚åœ¨ä½¿ç”¨ Promise çš„æ—¶å€™ï¼Œç»å¸¸ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼šéœ€è¦æ‰‹åŠ¨æ§åˆ¶ Promise ä½•æ—¶è¿›è¡Œ resolve æˆ– rejectï¼Œè€Œéåœ¨å¼‚æ­¥æ“ä½œå®Œæˆåè‡ªåŠ¨ resolve æˆ– rejectï¼Œè¿™ç§éœ€æ±‚ä¸‹é€šå¸¸åˆ›å»ºä¸€ä¸ªâ€œå»¶è¿Ÿå¯¹è±¡â€ï¼ˆDeferred Objectï¼‰ï¼Œä»¥ä¾¿åœ¨å¼‚æ­¥æ“ä½œå®Œæˆåå†å†³å®šä½•æ—¶ä»¥åŠå¦‚ä½•å¤„ç† Promise.</p>
<pre><code class="language-js">class Deferred {
  constructor() {
    this.promise = new Promise((resolve, reject) =&gt; {
      this.resolve = resolve;
      this.reject = reject;
    });
  }
}

const deferred = new Deferred();

deferred.resolve();
</code></pre>
<p>é‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†åœ¨ Promise æ„é€ å‡½æ•°çš„æ‰§è¡Œå™¨å‡½æ•°ä¸­æ‰‹åŠ¨å°† resolve å’Œ reject èµ‹å€¼ç»™å¤–éƒ¨å˜é‡ã€‚è¿™ç§æ–¹å¼è¾ƒä¸ºç¹çï¼Œä¸”ä»£ç ä¸å¤Ÿç®€æ´ã€‚ç›´æ¥ä½¿ç”¨ Promise.withResolversï¼Œå¯ä»¥åœ¨ä¸€è¡Œä»£ç ä¸­åŒæ—¶è·å– promiseã€resolve å’Œ rejectï¼Œä½¿ä»£ç æ›´ç®€æ´æ˜äº†ã€‚</p>
<p>è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">const { promise, resolve, reject } = Promise.withResolvers();
</code></pre>
<ul>
<li>promiseï¼šä¸€ä¸ªæ–°çš„ Promise å®ä¾‹</li>
<li>resolveï¼šä¸è¯¥ Promise å®ä¾‹å…³è”çš„ resolve å‡½æ•°</li>
<li>rejectï¼šä¸è¯¥ Promise å®ä¾‹å…³è”çš„ reject å‡½æ•°</li>
</ul>
<h2>2. Object.groupBy( )</h2>
<p>ä½¿ç”¨ Object.groupBy( ) å¯ä»¥å¯¹æ•°æ®è¿›è¡Œåˆ†ç±»ã€‚è¯¥æ–¹æ³•å¯ä»¥æ ¹æ®æŒ‡å®šçš„å±æ€§å°†å¯¹è±¡åˆ†ç»„åˆ°å¯¹åº”çš„æ•°ç»„ä¸­ï¼Œè®©ä½ å¯ä»¥æ›´åŠ è½»æ¾çš„ç»„ç»‡å’Œåˆ†ææ•°æ®ã€‚</p>
<pre><code class="language-js">const animals = [
  { gender: &quot;male&quot;, name: &quot;Charlie&quot; },
  { gender: &quot;female&quot;, name: &quot;Luna&quot; },
  { gender: &quot;male&quot;, name: &quot;Max&quot; },
];

const groupedAnimals = Object.groupBy(animals, (animal) =&gt; animal.gender);
console.log(groupedAnimals);

// Output:
// {
//   female: [{ gender: &#39;female&#39;, name: &#39;Luna&#39; }],
//   male: [{ gender: &#39;male&#39;, name: &#39;Charlie&#39; }, { gender: &#39;male&#39;, name: &#39;Max&#39; }],
// }
</code></pre>
<p>ä»¥ä¸‹å†…å®¹ä¸ºç¿»è¯‘äººå‘˜è¡¥å……å†…å®¹ï¼š</p>
<p>è¯¥æ–°ç‰¹æ€§åœ¨åˆ†æç»Ÿè®¡æ•°æ®æ—¶éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚å°†ç”¨æˆ·æŒ‰å¹´é¾„æ®µåˆ†ç»„ã€æŒ‰é”€å”®é¢åˆ†ç»„ç­‰ï¼Œå¯ä»¥è½»æ¾å®ç°ã€‚Object.groupBy( ) è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">Object.groupBy(array, callback);
</code></pre>
<ul>
<li>arrayï¼šéœ€è¦åˆ†ç»„çš„æ•°ç»„</li>
<li>callbackï¼šä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œç”¨æ¥ç¡®å®šåˆ†ç»„ä¾æ®ã€‚å®ƒä¼šæ¥æ”¶å½“å‰æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œè¿”å›ç”¨äºåˆ†ç»„çš„é”®å€¼ã€‚</li>
</ul>
<pre><code class="language-js">const fruits = [
  { name: &quot;apple&quot;, type: &quot;pome&quot; },
  { name: &quot;banana&quot;, type: &quot;berry&quot; },
  { name: &quot;cherry&quot;, type: &quot;drupe&quot; },
  { name: &quot;pear&quot;, type: &quot;pome&quot; },
];

// æ ¹æ®æ°´æœçš„ç±»å‹è¿›è¡Œåˆ†ç»„
const groupedByType = Object.groupBy(fruits, (fruit) =&gt; fruit.type);
console.log(groupedByType);
/* è¾“å‡ºï¼š
{
  pome: [{ name: &#39;apple&#39;, type: &#39;pome&#39; }, { name: &#39;pear&#39;, type: &#39;pome&#39; }],
  berry: [{ name: &#39;banana&#39;, type: &#39;berry&#39; }],
  drupe: [{ name: &#39;cherry&#39;, type: &#39;drupe&#39; }]
}
*/
</code></pre>
<pre><code class="language-js">const fruits = [
  { name: &quot;pineappleğŸ&quot;, color: &quot;ğŸŸ¡&quot; },
  { name: &quot;appleğŸ&quot;, color: &quot;ğŸ”´&quot; },
  { name: &quot;bananağŸŒ&quot;, color: &quot;ğŸŸ¡&quot; },
  { name: &quot;strawberryğŸ“&quot;, color: &quot;ğŸ”´&quot; },
];

const groupedByColor = Object.groupBy(fruits, (fruit, index) =&gt; fruit.color);

// åŸç”Ÿ group by ç¤ºä¾‹
console.log(groupedByColor);
/*
è¾“å‡ºï¼š
{
&#39;ğŸŸ¡&#39;: [
  { name: &#39;pineappleğŸ&#39;, color: &#39;ğŸŸ¡&#39; },
  { name: &#39;bananağŸŒ&#39;, color: &#39;ğŸŸ¡&#39; }
],
&#39;ğŸ”´&#39;: [
  { name: &#39;appleğŸ&#39;, color: &#39;ğŸ”´&#39; },
  { name: &#39;strawberryğŸ“&#39;, color: &#39;ğŸ”´&#39; }
]
}
*/
</code></pre>
<h2>3. Temporal</h2>
<p>Temporal API å¯ä»¥ä½¿æˆ‘ä»¬åœ¨ JS ä¸­å¤„ç†æ—¥æœŸå’Œæ—¶é—´çš„æ–¹å¼æ›´åŠ ç°ä»£åŒ–ã€‚Temporal å¼•å…¥äº†ä¸“é—¨ç”¨äºå¤„ç†æ—¥æœŸã€æ—¶é—´ã€æ—¶æ®µçš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶è¿˜å¼•å…¥äº†æ›´ç›´è§‚çš„åˆ›å»ºã€æ“ä½œã€æ ¼å¼åŒ–è¿™äº›æ•°æ®çš„å‡½æ•°ã€‚</p>
<pre><code class="language-js">const today = Temporal.PlainDate.from({ year: 2023, month: 11, day: 19 });
console.log(today.toString()); // Output: 2023-11-19

const duration = Temporal.Duration.from({ hours: 3, minutes: 30 });
const tomorrow = today.add(duration);
console.log(tomorrow.toString()); // Output: 2023-11-20
</code></pre>
<p>ä»¥ä¸‹å†…å®¹ä¸ºç¿»è¯‘äººå‘˜è¡¥å……å†…å®¹ï¼š</p>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ Temporalï¼Ÿ</strong></p>
<ol>
<li>ä¿®å¤ Date çš„é—®é¢˜ï¼šDate API å­˜åœ¨è®¾è®¡ç¼ºé™·ï¼Œæ¯”å¦‚ï¼š</li>
</ol>
<ul>
<li>ä¸å¯å˜æ€§ï¼šDate å¯¹è±¡æ˜¯å¯å˜çš„ï¼Œå®¹æ˜“å¯¼è‡´æ„å¤–çš„å‰¯ä½œç”¨ã€‚</li>
<li>ä¸æ”¯æŒæ—¶åŒºå¤„ç†ï¼šDate åªèƒ½å¤„ç†æœ¬åœ°æ—¶åŒºæˆ– UTCã€‚</li>
<li>æ–¹æ³•ä¸ç›´è§‚ï¼šå¾ˆå¤š Date æ–¹æ³•æœ‰å‰¯ä½œç”¨ï¼Œæˆ–è€…å‘½åä¸æ¸…æ™°ã€‚</li>
</ul>
<ol start="3">
<li>ç°ä»£éœ€æ±‚ï¼šå¼€å‘è€…éœ€è¦æ›´å¼ºå¤§çš„æ—¶é—´æ“ä½œå·¥å…·æ¥åº”å¯¹å›½é™…åŒ–ã€å¤šæ—¶åŒºã€æ—¥å†è½¬æ¢ç­‰éœ€æ±‚ã€‚</li>
</ol>
<p>Temporal API å¼•å…¥äº†ä¸€ç»„ä¸“ç”¨ç±»å‹ï¼Œæ¯ç§ç±»å‹éƒ½é’ˆå¯¹ç‰¹å®šçš„æ—¶é—´ç›¸å…³æ¦‚å¿µï¼Œå¹¶ä¸”å…·å¤‡ä»¥ä¸‹é€šç”¨ç‰¹æ€§ï¼š</p>
<ul>
<li>ä¸å¯å˜æ€§ï¼šæ‰€æœ‰ Temporal å¯¹è±¡éƒ½æ˜¯ä¸å¯å˜çš„ã€‚</li>
<li>æ”¯æŒæ—¶åŒºå’Œæ—¥å†ï¼šå¯å¤„ç†å¤æ‚çš„æ—¶åŒºå’Œéå…¬å†ï¼ˆå¦‚ä¼Šæ–¯å…°å†ï¼‰æ—¥æœŸã€‚</li>
<li>æ›´ç›´è§‚çš„ APIï¼šæä¾›æ˜“ç”¨ã€æ˜“ç†è§£çš„è¯­æ³•ã€‚</li>
</ul>
<p>ä¸‹é¢æä¾›ä¸€äº› Temporal çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="language-js">const date = Temporal.PlainDate.from({ year: 2006, month: 8, day: 24 }); // =&gt; 2006-08-24
date.year; // =&gt; 2006
date.inLeapYear; // =&gt; false
date.toString(); // =&gt; &#39;2006-08-24&#39;
</code></pre>
<p>å¦å¤–è¯¥ç‰¹æ€§ç›®å‰è¿˜æ²¡æœ‰æ­£å¼è½åœ°ï¼Œå³ä¾¿æ˜¯æœ€æ–°çš„ chrome æµè§ˆå™¨éƒ½è¿˜ä¸æ”¯æŒè¯¥ç‰¹æ€§ã€‚ä½ å¯ä»¥åœ¨ <a href="https://tc39.es/proposal-temporal/docs/">https://tc39.es/proposal-temporal/docs/</a> æŸ¥çœ‹è¯¥ç‰¹æ€§çš„æœ€æ–°åŠ¨æ€ã€‚</p>
<h2>4. Records and Tuples</h2>
<p>Record å’Œ Tuple å¼•å…¥äº†æ›´ä¸ºå¥å£®å’Œç±»å‹å®‰å…¨çš„æ–¹å¼æ¥å¤„ç†ç»“æ„åŒ–çš„æ•°æ®ã€‚Record ç±»ä¼¼äºå¯¹è±¡ï¼Œä½†å…·æœ‰ä¸€ç»„å›ºå®šçš„ç±»å‹åŒ–å±æ€§ã€‚Tuple ç±»ä¼¼äºæœ‰å›ºå®šé•¿åº¦çš„æ•°ç»„ï¼Œæ•°ç»„é‡Œé¢çš„æ¯ä¸ªå…ƒç´ å¯ä»¥å…·æœ‰ä¸åŒçš„ç±»å‹ã€‚</p>
<pre><code class="language-js">let record = #{
  id: 1,
  name: &quot;JavaScript&quot;,
  year: 2024,
};
console.log(record.name); // Output: JavaScript
</code></pre>
<p><strong>ä»¥ä¸‹å†…å®¹ä¸ºç¿»è¯‘äººå‘˜è¡¥å……å†…å®¹ï¼š</strong></p>
<p>Record å’Œ Tuple æ˜¯ ES2024 ææ¡ˆä¸­çš„ä¸¤ä¸ªå…¨æ–°æ•°æ®ç»“æ„ï¼Œç›®çš„æ˜¯ä¸º JS å¼•å…¥ä¸å¯å˜çš„ç»“æ„åŒ–æ•°æ®ã€‚</p>
<p><strong>Record ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç±»ä¼¼äºä¸å¯å˜çš„å¯¹è±¡ï¼Œç”¨äºå­˜å‚¨é”®å€¼å¯¹ï¼Œé”®æ˜¯å­—ç¬¦ä¸²ï¼Œå€¼å¯ä»¥æ˜¯ä»»æ„çš„ JS æ•°æ®ã€‚</li>
</ul>
<pre><code class="language-js">const record = #{ a: 1, b: 2 };
console.log(record.a); // 1
console.log(record.b); // 2
</code></pre>
<ul>
<li>ä¸å¯å˜æ€§ï¼šä¸€æ—¦åˆ›å»ºï¼Œå°±æ— æ³•æ›´æ”¹ã€‚</li>
</ul>
<pre><code class="language-js">const record = #{ a: 1 };
record.a = 2; // TypeError: Cannot assign to read-only property
</code></pre>
<ul>
<li>ç»“æ„åŒ–æ¯”è¾ƒï¼šä¸¤ä¸ªç»“æ„ç›¸åŒçš„ Record ä¼šè¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ï¼Œå³ä½¿å®ƒä»¬åœ¨å†…å­˜ä¸­æ˜¯ä¸¤ä¸ªä¸åŒçš„å®ä¾‹ã€‚</li>
</ul>
<pre><code class="language-js">const obj1 = { a: 1 };
const obj2 = { a: 1 };
console.log(obj1 === obj2); // false

const record1 = #{ a: 1 };
const record2 = #{ a: 1 };
console.log(record1 === record2); // true
</code></pre>
<p><strong>Tuple ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>ç±»ä¼¼äºä¸å¯å˜çš„æ•°ç»„ï¼Œç”¨äºå­˜å‚¨æœ‰åºçš„æ•°æ®é›†åˆã€‚</li>
</ul>
<pre><code class="language-js">const tuple = #[1, 2, 3];
console.log(tuple[0]); // 1
</code></pre>
<ul>
<li>ä¸å¯å˜æ€§ï¼šä¸€æ—¦åˆ›å»ºï¼Œå°±æ— æ³•æ›´æ”¹ã€‚</li>
</ul>
<pre><code class="language-js">const tuple = #[1, 2];
tuple[0] = 3; // TypeError: Cannot assign to read-only property
</code></pre>
<ul>
<li>ç»“æ„åŒ–æ¯”è¾ƒï¼šä¸¤ä¸ªç»“æ„ç›¸åŒçš„ Tuple ä¼šè¢«è®¤ä¸ºæ˜¯ç›¸ç­‰çš„ã€‚</li>
</ul>
<pre><code class="language-js">const tuple1 = #[1, 2];
const tuple2 = #[1, 2];
console.log(tuple1 === tuple2); // true
</code></pre>
<p>å¦å¤–æ— è®ºæ˜¯ Record è¿˜æ˜¯ Tupleï¼Œç›®å‰ä»ç„¶å¤„äºææ¡ˆé˜¶æ®µï¼Œå³ä¾¿æ˜¯æœ€æ–°çš„ chrome æµè§ˆå™¨ï¼Œéƒ½è¿˜ä¸æ”¯æŒè¿™ä¸¤ç§æ–°çš„æ•°æ®ç»“æ„ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ <a href="https://tc39.es/proposal-record-tuple/">https://tc39.es/proposal-record-tuple/</a> æŸ¥çœ‹è¿™ä¸¤ç§æ–°æ•°æ®ç»“æ„çš„æœ€æ–°åŠ¨æ€ã€‚</p>
<h2>5. Decorator</h2>
<p>è£…é¥°å™¨æä¾›äº†ä¸€ç§ç®€æ´çš„æ–¹æ³•æ¥æ·»åŠ å…ƒæ•°æ®æˆ–ä¿®æ”¹ç±»ã€å‡½æ•°æˆ–å±æ€§çš„è¡Œä¸ºã€‚è£…é¥°å™¨çš„å‡ºç°ä¸ºæ—¥å¿—è®°å½•ã€ç¼“å­˜å’Œä¾èµ–æ³¨å…¥ç­‰åŠŸèƒ½æä¾›äº†æ›´åŠ ä¼˜é›…çš„å®ç°æ–¹å¼ã€‚</p>
<pre><code class="language-js">function logged(target, key, descriptor) {
  const original = descriptor.value;
  descriptor.value = function (...args) {
    console.log(`Calling ${key} with`, args);
    return original.apply(this, args);
  };
  return descriptor;
}

class Example {
  @logged
  sum(a, b) {
    return a + b;
  }
}
const e = new Example();
e.sum(1, 2); // Output: [1, 2]
</code></pre>
<p><strong>ä»¥ä¸‹å†…å®¹ä¸ºç¿»è¯‘äººå‘˜è¡¥å……å†…å®¹ï¼š</strong></p>
<p>è£…é¥°å™¨æ˜¯ä¸€ç§å£°æ˜æ€§è¯­æ³•ï¼Œèƒ½å¤Ÿä¸ºç±»çš„å­—æ®µã€æ–¹æ³•ã€è®¿é—®å™¨ä»¥åŠæ•´ä¸ªç±»æ·»åŠ å…ƒæ•°æ®æˆ–ä¿®æ”¹è¡Œä¸ºã€‚å®ƒé€šè¿‡ä¸ºç›®æ ‡æ·»åŠ ä¿®é¥°å™¨å‡½æ•°ï¼Œæå‡ä»£ç çš„å¯å¤ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚è£…é¥°å™¨çš„åŸºæœ¬è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-js">@decorator
class MyClass {
  @decorator
  myField;

  @decorator
  myMethod() {}
}
</code></pre>
<p>è£…é¥°å™¨æ¥æ”¶ä»¥ä¸‹ä¸¤ä¸ªå‚æ•°ï¼š</p>
<ol>
<li>valueï¼šå¯¹äºå­—æ®µï¼Œæ˜¯åˆå§‹å€¼ï¼›å¯¹äºæ–¹æ³•ï¼Œæ˜¯åŸæ–¹æ³•ï¼›å¯¹äºè®¿é—®å™¨ï¼Œæ˜¯ getter/setterï¼›å¯¹äºç±»ï¼Œæ˜¯ç±»æœ¬èº«ã€‚</li>
<li>contextï¼šæä¾›å…³äºä¿®é¥°ç›®æ ‡çš„ä¿¡æ¯ã€‚å¸¸ç”¨å±æ€§ï¼š</li>
</ol>
<ul>
<li>kindï¼šä¿®é¥°çš„ç›®æ ‡ç±»å‹ï¼Œå¦‚ classã€fieldã€methodã€getter æˆ– setterã€‚</li>
<li>nameï¼šä¿®é¥°ç›®æ ‡çš„åç§°ã€‚</li>
<li>staticï¼šæ˜¯å¦ä¸ºé™æ€æˆå‘˜ã€‚</li>
<li>privateï¼šæ˜¯å¦ä¸ºç§æœ‰æˆå‘˜ã€‚</li>
<li>addInitializer(fn)ï¼šå…è®¸ä¸ºç›®æ ‡æ·»åŠ åˆå§‹åŒ–å™¨ã€‚</li>
</ul>
<pre><code class="language-js">function logContext(value, context) {
  console.log(context);
  return value;
}

class MyClass {
  @logContext
  static staticField = 42;

  @logContext
  #privateField = &quot;Hello&quot;;

  @logContext
  myMethod() {}
}
// è¾“å‡º: { kind: &#39;field&#39;, name: &#39;staticField&#39;, static: true, private: false }
// è¾“å‡º: { kind: &#39;field&#39;, name: &#39;#privateField&#39;, static: false, private: true }
// è¾“å‡º: { kind: &#39;method&#39;, name: &#39;myMethod&#39;, static: false, private: false }
</code></pre>
<ol>
<li>æƒé™æ§åˆ¶ä¸­ç”¨äºé™åˆ¶æŸäº›æ–¹æ³•çš„è®¿é—®ã€‚</li>
</ol>
<pre><code class="language-js">function adminOnly(value, context) {
  return function (...args) {
    if (!this.isAdmin) throw new Error(&quot;Unauthorized&quot;);
    return value.apply(this, args);
  };
}

class User {
  isAdmin = false;

  @adminOnly
  deleteUser() {
    console.log(&quot;User deleted&quot;);
  }
}
</code></pre>
<ol start="2">
<li>æ—¥å¿—è®°å½•æ—¶åœ¨æ–¹æ³•è°ƒç”¨æ—¶è‡ªåŠ¨è®°å½•æ—¥å¿—ã€‚</li>
</ol>
<pre><code class="language-js">function logMethod(value, context) {
  return function (...args) {
    console.log(`Calling ${context.name} with`, args);
    return value.apply(this, args);
  };
}

class MyClass {
  @logMethod
  myMethod(x, y) {
    return x + y;
  }
}
</code></pre>
<ol start="3">
<li>éªŒè¯å­—æ®µçš„å€¼æ˜¯å¦ç¬¦åˆè¦æ±‚ã€‚</li>
</ol>
<pre><code class="language-js">function validateRange(min, max) {
  return function (value, context) {
    return function (initialValue) {
      if (initialValue &lt; min || initialValue &gt; max) {
        throw new Error(`${context.name} must be between ${min} and ${max}`);
      }
      return initialValue;
    };
  };
}

class MyClass {
  @validateRange(1, 10)
  myField = 5;
}
</code></pre>
<p>ç›®å‰è¯¥ç‰¹æ€§ä¹Ÿè¿˜æ²¡æœ‰æ­£å¼è½åœ°ï¼Œå³ä¾¿æ˜¯æœ€æ–°çš„ chrome æµè§ˆå™¨éƒ½è¿˜ä¸æ”¯æŒè¯¥ç‰¹æ€§ã€‚</p>
<p>ä½ å¯ä»¥åœ¨ <a href="https://tc39.es/proposal-decorators/">https://tc39.es/proposal-decorators/</a> æŸ¥çœ‹è¯¥ç‰¹æ€§çš„æœ€æ–°åŠ¨æ€ã€‚</p>
<p>ES15 è¿˜æœ‰æ›´å¤šåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å¢å¼º</li>
<li>æ–°å¢çš„ç®¡é“è¿ç®—ç¬¦ (|&gt;)</li>
<li>String.prototype.isWellFormed( ) æ–¹æ³•</li>
<li>ArrayBuffer.prototype.resize( ) æ–¹æ³•</li>
<li>......</li>
</ul>
<p>ç­‰ç­‰ã€‚è¦æ·±å…¥äº†è§£æ‰€æœ‰æ–°å†…å®¹ï¼Œè¯·æŸ¥çœ‹ MDN ä¸Šçš„å®˜æ–¹æ–‡æ¡£ã€‚</p>

        </div>
      </div>
    </div>
    <div class="body_bg"></div>
    <script defer src="../js/prism.min.js"></script>
    <script>
      const switchBtn = document.querySelector(".layout__main_left-switch");
      const left = document.querySelector(".layout__main_left");
      switchBtn.addEventListener("click", () => {
        left.classList.toggle("show");
      });
    </script>
  </body>
</html>
