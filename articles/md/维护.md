---
title: "维护"
tag: "现代 JavaScript 库开发"
time: 2025-02-01 20:54:52
---

库的开源不是一劳永逸的事情，需要持续迭代和持续维护。

## 社区协作

一个流行的开源库会有众多使用者，同时会有社区参与贡献和维护。

### 社区反馈

社区用户可以通过 GitHub 的 Issue 反馈信息，库的开发者需要对 Issue 进行回复，并于 Issue 进行管理。

GitHub 提供了对 Issue 分类的功能，在 Issue 详情页可以为 Issue 添加 Label。

<img src="../imgs/140/12.png" />

Issue 可以分为 3 类，分别是求助类、故障类、建议类。分类和 GitHub Label 的对应关系如下：

- 求助类：help wanted

- 故障类：bug

- 建议类：enhancement

为了更好的解答 Issue 反馈的问题，就需要了解一些用户的环境信息，从而能够快速复现问题。

社区用户在提问时由于习惯各异，大概率不会提供完整的信息，为了避免反复沟通，可以规范 Issue 的录入内容。

**通过 Issue 模板可以实现这个诉求。**

只需要在项目的根目录下添加 `.github/ISSUE_TEMPLATE.md` 文件即可。

<img src="../imgs/140/13.png" />

在新建 Issue 时，GitHub 会默认展示 ISSUE_TEMPLATE.md 模板中的内容，如下，如果没有此文件，则默认填充为空。

<img src="../imgs/140/14.png" />

一般对于求助类 Issue，Issue 系统自身就可以完成整个过程的流转，而对于故障类 Issue，则还需要修复 Bug，提交代码，发布新版本。

**那么如何将代码提交信息和 Issue 关联起来呢？**

其实每个 Issue 都有一个 ID，其位于 Issue 标签的旁边，如下图中显示 Issue ID 是 `#3`。

<img src="../imgs/140/15.png" />

在提交信息中添加 Issue ID，即可让提交信息和 Issue 产生联系，GitHub 会在 Issue 下面自动显示和当前 Issue 关联的提交信息。

下面的命令会创建一个关联 Issue ID 为 `#3` 的提交信息：

```sh
git commit -m "测试修改代码 #3"
```

再次查看 GitHub Issue 页面，结果如图，可以看到提交信息自动关联了过来。

<img src="../imgs/140/16.png" />

Issue 问题解决后，可以单击 `Close Issue` 按钮关闭 Issue。除了手动关闭，还可以在提交信息中添加 fix、fixed、close、closed 等关键字自动关闭 Issue。**关键字不区分大小写**

```sh
git commit -m "测试修改代码 fixed #3"
```

通过提交信息关闭的 Issue 在 GitHub 上会有特殊的关联显示，

<img src="../imgs/140/17.png" />

【75】